!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n=window.webpackJsonp;window.webpackJsonp=function(r,o,s){for(var a,u,c,l=0,f=[];l<r.length;l++)u=r[l],i[u]&&f.push(i[u][0]),i[u]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);for(n&&n(r,o,s);f.length;)f.shift()();if(s)for(l=0;l<s.length;l++)c=e(e.s=s[l]);return c};var r={},i={2:0};e.e=function(t){function n(){o.onerror=o.onload=null,clearTimeout(s);var e=i[t];0!==e&&(e&&e[1](new Error("Loading chunk "+t+" failed.")),i[t]=void 0)}if(0===i[t])return Promise.resolve();if(i[t])return i[t][2];var r=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.charset="utf-8",o.async=!0,o.timeout=12e4,o.src=e.p+"static/js/"+t+"."+{0:"cfbb9645102801fa5d87",1:"7baeecb30adf3860be6b"}[t]+".js";var s=setTimeout(n,12e4);o.onerror=o.onload=n,r.appendChild(o);var a=new Promise(function(e,n){i[t]=[e,n]});return i[t][2]=a},e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,e,n){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e.oe=function(t){throw console.error(t),t}}([function(t,e,n){var r,i;(function(){function n(t){function e(e,n,r,i,o,s){for(;o>=0&&o<s;o+=t){var a=i?i[o]:o;r=n(r,e[a],a,e)}return r}return function(n,r,i,o){r=O(r,o,4);var s=!N(n)&&A.keys(n),a=(s||n).length,u=t>0?0:a-1;return arguments.length<3&&(i=n[s?s[u]:u],u+=t),e(n,r,i,s,u,a)}}function o(t){return function(e,n,r){n=x(n,r);for(var i=T(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}function s(t,e,n){return function(r,i,o){var s=0,a=T(r);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=e(p.call(r,s,a),A.isNaN),o>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&o<a;o+=t)if(r[o]===i)return o;return-1}}function a(t,e){var n=k.length,r=t.constructor,i=A.isFunction(r)&&r.prototype||f,o="constructor";for(A.has(t,o)&&!A.contains(e,o)&&e.push(o);n--;)o=k[n],o in t&&t[o]!==i[o]&&!A.contains(e,o)&&e.push(o)}var u=this,c=u._,l=Array.prototype,f=Object.prototype,h=Function.prototype,d=l.push,p=l.slice,_=f.toString,v=f.hasOwnProperty,m=Array.isArray,g=Object.keys,y=h.bind,b=Object.create,w=function(){},A=function(t){return t instanceof A?t:this instanceof A?void(this._wrapped=t):new A(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=A),e._=A,A.VERSION="1.8.3";var O=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},x=function(t,e,n){return null==t?A.identity:A.isFunction(t)?O(t,e,n):A.isObject(t)?A.matcher(t):A.property(t)};A.iteratee=function(t,e){return x(t,e,1/0)};var S=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=t(o),a=s.length,u=0;u<a;u++){var c=s[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}},E=function(t){if(!A.isObject(t))return{};if(b)return b(t);w.prototype=t;var e=new w;return w.prototype=null,e},C=function(t){return function(e){return null==e?void 0:e[t]}},j=Math.pow(2,53)-1,T=C("length"),N=function(t){var e=T(t);return"number"==typeof e&&e>=0&&e<=j};A.each=A.forEach=function(t,e,n){e=O(e,n);var r,i;if(N(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=A.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},A.map=A.collect=function(t,e,n){e=x(e,n);for(var r=!N(t)&&A.keys(t),i=(r||t).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=e(t[a],a,t)}return o},A.reduce=A.foldl=A.inject=n(1),A.reduceRight=A.foldr=n(-1),A.find=A.detect=function(t,e,n){var r;if(r=N(t)?A.findIndex(t,e,n):A.findKey(t,e,n),void 0!==r&&r!==-1)return t[r]},A.filter=A.select=function(t,e,n){var r=[];return e=x(e,n),A.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},A.reject=function(t,e,n){return A.filter(t,A.negate(x(e)),n)},A.every=A.all=function(t,e,n){e=x(e,n);for(var r=!N(t)&&A.keys(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0},A.some=A.any=function(t,e,n){e=x(e,n);for(var r=!N(t)&&A.keys(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1},A.contains=A.includes=A.include=function(t,e,n,r){return N(t)||(t=A.values(t)),("number"!=typeof n||r)&&(n=0),A.indexOf(t,e,n)>=0},A.invoke=function(t,e){var n=p.call(arguments,2),r=A.isFunction(e);return A.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},A.pluck=function(t,e){return A.map(t,A.property(e))},A.where=function(t,e){return A.filter(t,A.matcher(e))},A.findWhere=function(t,e){return A.find(t,A.matcher(e))},A.max=function(t,e,n){var r,i,o=-(1/0),s=-(1/0);if(null==e&&null!=t){t=N(t)?t:A.values(t);for(var a=0,u=t.length;a<u;a++)r=t[a],r>o&&(o=r)}else e=x(e,n),A.each(t,function(t,n,r){i=e(t,n,r),(i>s||i===-(1/0)&&o===-(1/0))&&(o=t,s=i)});return o},A.min=function(t,e,n){var r,i,o=1/0,s=1/0;if(null==e&&null!=t){t=N(t)?t:A.values(t);for(var a=0,u=t.length;a<u;a++)r=t[a],r<o&&(o=r)}else e=x(e,n),A.each(t,function(t,n,r){i=e(t,n,r),(i<s||i===1/0&&o===1/0)&&(o=t,s=i)});return o},A.shuffle=function(t){for(var e,n=N(t)?t:A.values(t),r=n.length,i=Array(r),o=0;o<r;o++)e=A.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},A.sample=function(t,e,n){return null==e||n?(N(t)||(t=A.values(t)),t[A.random(t.length-1)]):A.shuffle(t).slice(0,Math.max(0,e))},A.sortBy=function(t,e,n){return e=x(e,n),A.pluck(A.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var I=function(t){return function(e,n,r){var i={};return n=x(n,r),A.each(e,function(r,o){var s=n(r,o,e);t(i,r,s)}),i}};A.groupBy=I(function(t,e,n){A.has(t,n)?t[n].push(e):t[n]=[e]}),A.indexBy=I(function(t,e,n){t[n]=e}),A.countBy=I(function(t,e,n){A.has(t,n)?t[n]++:t[n]=1}),A.toArray=function(t){return t?A.isArray(t)?p.call(t):N(t)?A.map(t,A.identity):A.values(t):[]},A.size=function(t){return null==t?0:N(t)?t.length:A.keys(t).length},A.partition=function(t,e,n){e=x(e,n);var r=[],i=[];return A.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},A.first=A.head=A.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:A.initial(t,t.length-e)},A.initial=function(t,e,n){return p.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},A.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:A.rest(t,Math.max(0,t.length-e))},A.rest=A.tail=A.drop=function(t,e,n){return p.call(t,null==e||n?1:e)},A.compact=function(t){return A.filter(t,A.identity)};var P=function(t,e,n,r){for(var i=[],o=0,s=r||0,a=T(t);s<a;s++){var u=t[s];if(N(u)&&(A.isArray(u)||A.isArguments(u))){e||(u=P(u,e,n));var c=0,l=u.length;for(i.length+=l;c<l;)i[o++]=u[c++]}else n||(i[o++]=u)}return i};A.flatten=function(t,e){return P(t,e,!1)},A.without=function(t){return A.difference(t,p.call(arguments,1))},A.uniq=A.unique=function(t,e,n,r){A.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=x(n,r));for(var i=[],o=[],s=0,a=T(t);s<a;s++){var u=t[s],c=n?n(u,s,t):u;e?(s&&o===c||i.push(u),o=c):n?A.contains(o,c)||(o.push(c),i.push(u)):A.contains(i,u)||i.push(u)}return i},A.union=function(){return A.uniq(P(arguments,!0,!0))},A.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=T(t);r<i;r++){var o=t[r];if(!A.contains(e,o)){for(var s=1;s<n&&A.contains(arguments[s],o);s++);s===n&&e.push(o)}}return e},A.difference=function(t){var e=P(arguments,!0,!0,1);return A.filter(t,function(t){return!A.contains(e,t)})},A.zip=function(){return A.unzip(arguments)},A.unzip=function(t){for(var e=t&&A.max(t,T).length||0,n=Array(e),r=0;r<e;r++)n[r]=A.pluck(t,r);return n},A.object=function(t,e){for(var n={},r=0,i=T(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},A.findIndex=o(1),A.findLastIndex=o(-1),A.sortedIndex=function(t,e,n,r){n=x(n,r,1);for(var i=n(e),o=0,s=T(t);o<s;){var a=Math.floor((o+s)/2);n(t[a])<i?o=a+1:s=a}return o},A.indexOf=s(1,A.findIndex,A.sortedIndex),A.lastIndexOf=s(-1,A.findLastIndex),A.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i};var R=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=E(t.prototype),s=t.apply(o,i);return A.isObject(s)?s:o};A.bind=function(t,e){if(y&&t.bind===y)return y.apply(t,p.call(arguments,1));if(!A.isFunction(t))throw new TypeError("Bind must be called on a function");var n=p.call(arguments,2),r=function(){return R(t,r,e,this,n.concat(p.call(arguments)))};return r},A.partial=function(t){var e=p.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),s=0;s<i;s++)o[s]=e[s]===A?arguments[r++]:e[s];for(;r<arguments.length;)o.push(arguments[r++]);return R(t,n,this,this,o)};return n},A.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)n=arguments[e],t[n]=A.bind(t[n],t);return t},A.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return A.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},A.delay=function(t,e){var n=p.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},A.defer=A.partial(A.delay,A,1),A.throttle=function(t,e,n){var r,i,o,s=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:A.now(),s=null,o=t.apply(r,i),s||(r=i=null)};return function(){var c=A.now();a||n.leading!==!1||(a=c);var l=e-(c-a);return r=this,i=arguments,l<=0||l>e?(s&&(clearTimeout(s),s=null),a=c,o=t.apply(r,i),s||(r=i=null)):s||n.trailing===!1||(s=setTimeout(u,l)),o}},A.debounce=function(t,e,n){var r,i,o,s,a,u=function(){var c=A.now()-s;c<e&&c>=0?r=setTimeout(u,e-c):(r=null,n||(a=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,s=A.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(a=t.apply(o,i),o=i=null),a}},A.wrap=function(t,e){return A.partial(e,t)},A.negate=function(t){return function(){return!t.apply(this,arguments)}},A.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},A.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},A.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},A.once=A.partial(A.before,2);var U=!{toString:null}.propertyIsEnumerable("toString"),k=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];A.keys=function(t){if(!A.isObject(t))return[];if(g)return g(t);var e=[];for(var n in t)A.has(t,n)&&e.push(n);return U&&a(t,e),e},A.allKeys=function(t){if(!A.isObject(t))return[];var e=[];for(var n in t)e.push(n);return U&&a(t,e),e},A.values=function(t){for(var e=A.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},A.mapObject=function(t,e,n){e=x(e,n);for(var r,i=A.keys(t),o=i.length,s={},a=0;a<o;a++)r=i[a],s[r]=e(t[r],r,t);return s},A.pairs=function(t){for(var e=A.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},A.invert=function(t){for(var e={},n=A.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},A.functions=A.methods=function(t){var e=[];for(var n in t)A.isFunction(t[n])&&e.push(n);return e.sort()},A.extend=S(A.allKeys),A.extendOwn=A.assign=S(A.keys),A.findKey=function(t,e,n){e=x(e,n);for(var r,i=A.keys(t),o=0,s=i.length;o<s;o++)if(r=i[o],e(t[r],r,t))return r},A.pick=function(t,e,n){var r,i,o={},s=t;if(null==s)return o;A.isFunction(e)?(i=A.allKeys(s),r=O(e,n)):(i=P(arguments,!1,!1,1),r=function(t,e,n){return e in n},s=Object(s));for(var a=0,u=i.length;a<u;a++){var c=i[a],l=s[c];r(l,c,s)&&(o[c]=l)}return o},A.omit=function(t,e,n){if(A.isFunction(e))e=A.negate(e);else{var r=A.map(P(arguments,!1,!1,1),String);e=function(t,e){return!A.contains(r,e)}}return A.pick(t,e,n)},A.defaults=S(A.allKeys,!0),A.create=function(t,e){var n=E(t);return e&&A.extendOwn(n,e),n},A.clone=function(t){return A.isObject(t)?A.isArray(t)?t.slice():A.extend({},t):t},A.tap=function(t,e){return e(t),t},A.isMatch=function(t,e){var n=A.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0};var D=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof A&&(t=t._wrapped),e instanceof A&&(e=e._wrapped);var i=_.call(t);if(i!==_.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(A.isFunction(s)&&s instanceof s&&A.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if(u=t.length,u!==e.length)return!1;for(;u--;)if(!D(t[u],e[u],n,r))return!1}else{var c,l=A.keys(t);if(u=l.length,A.keys(e).length!==u)return!1;for(;u--;)if(c=l[u],!A.has(e,c)||!D(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0};A.isEqual=function(t,e){return D(t,e)},A.isEmpty=function(t){return null==t||(N(t)&&(A.isArray(t)||A.isString(t)||A.isArguments(t))?0===t.length:0===A.keys(t).length)},A.isElement=function(t){return!(!t||1!==t.nodeType)},A.isArray=m||function(t){return"[object Array]"===_.call(t)},A.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},A.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){A["is"+t]=function(e){return _.call(e)==="[object "+t+"]"}}),A.isArguments(arguments)||(A.isArguments=function(t){return A.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(A.isFunction=function(t){return"function"==typeof t||!1}),A.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},A.isNaN=function(t){return A.isNumber(t)&&t!==+t},A.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===_.call(t)},A.isNull=function(t){return null===t},A.isUndefined=function(t){return void 0===t},A.has=function(t,e){return null!=t&&v.call(t,e)},A.noConflict=function(){return u._=c,this},A.identity=function(t){return t},A.constant=function(t){return function(){return t}},A.noop=function(){},A.property=C,A.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},A.matcher=A.matches=function(t){return t=A.extendOwn({},t),function(e){return A.isMatch(e,t)}},A.times=function(t,e,n){var r=Array(Math.max(0,t));e=O(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},A.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},A.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},M=A.invert(L),q=function(t){var e=function(e){return t[e]},n="(?:"+A.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};A.escape=q(L),A.unescape=q(M),A.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),A.isFunction(r)?r.call(t):r};var F=0;A.uniqueId=function(t){var e=++F+"";return t?t+e:e},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\u2028|\u2029/g,J=function(t){return"\\"+B[t]};A.template=function(t,e,n){!e&&n&&(e=n),e=A.defaults({},e,A.templateSettings);var r=RegExp([(e.escape||V).source,(e.interpolate||V).source,(e.evaluate||V).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,s,a){return o+=t.slice(i,a).replace(G,J),i=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}var u=function(t){return s.call(this,t,A)},c=e.variable||"obj";return u.source="function("+c+"){\n"+o+"}",u},A.chain=function(t){var e=A(t);return e._chain=!0,e};var W=function(t,e){return t._chain?A(e).chain():e};A.mixin=function(t){A.each(A.functions(t),function(e){var n=A[e]=t[e];A.prototype[e]=function(){var t=[this._wrapped];return d.apply(t,arguments),W(this,n.apply(A,t))}})},A.mixin(A),A.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=l[t];A.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],W(this,n)}}),A.each(["concat","join","slice"],function(t){var e=l[t];A.prototype[t]=function(){return W(this,e.apply(this._wrapped,arguments))}}),A.prototype.value=function(){return this._wrapped},A.prototype.valueOf=A.prototype.toJSON=A.prototype.value,A.prototype.toString=function(){return""+this._wrapped},r=[],i=function(){return A}.apply(e,r),!(void 0!==i&&(t.exports=i))}).call(this)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(80),o=r(i);e["default"]=o["default"]||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){var r=n(52)("wks"),i=n(56),o=n(3).Symbol,s="function"==typeof o,a=t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))};a.store=r},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){"use strict";(function(e){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=n(26),o=n(40)("leancloud:request"),s=n(152),a=n(8),u=n(58),c=n(5),l=n(41),f=n(0),h=void 0,d={cn:"https://api.leancloud.cn",us:"https://us-api.leancloud.cn"},p=function(t,e){var n=(new Date).getTime(),r=s(n+t);return e?r+","+n+",master":r+","+n},_=function(t){var e=["batch","classes","files","date","functions","call","login","push","search/select","requestPasswordReset","requestEmailVerify","requestPasswordResetBySmsCode","resetPasswordBySmsCode","requestMobilePhoneVerify","requestLoginSmsCode","verifyMobilePhone","requestSmsCode","verifySmsCode","users","usersByMobilePhone","cloudQuery","qiniu","fileTokens","statuses","bigquery","search/select","subscribe/statuses/count","subscribe/statuses","installations"];if(e.indexOf(t)===-1&&!/users\/[^\/]+\/updatePassword/.test(t)&&!/users\/[^\/]+\/friendship\/[^\/]+/.test(t))throw new Error("Bad router: "+t+".")},v=0,m=function(t,e,n){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],s=arguments[4],u=v++;o("request("+u+")",t,e,n,r);var c=new a,l=i(t,e).set(r).send(n).end(function(t,e){return e&&o("response("+u+")",e.status,e.body&&e.text,e.header),t?(e&&(t.statusCode=e.status,t.responseText=e.text,t.response=e.body),c.reject(t)):c.resolve(e.body,e.status,e)});return s&&l.on("progress",s),c},g=function(t){var n={"X-LC-Id":l.applicationId,"Content-Type":"application/json;charset=UTF-8"};l.masterKey&&l._useMasterKey?n["X-LC-Sign"]=p(l.masterKey,!0):n["X-LC-Sign"]=p(l.applicationKey),null!==l._config.applicationProduction&&(n["X-LC-Prod"]=l._config.applicationProduction),l._config.isNode?n["User-Agent"]=l._config.userAgent||"AV/"+l.version+"; Node.js/"+e.version:n["X-LC-UA"]="AV/"+l.version;var r=new a;return t?(n["X-LC-Session"]=t,r.resolve(n)):l._config.disableCurrentUser?r.resolve(n):l.User.currentAsync().then(function(t){t&&t._sessionToken&&(n["X-LC-Session"]=t._sessionToken),r.resolve(n)}),r},y=function(t,e,n,i,o){l.serverURL&&(l._config.APIServerURL=l.serverURL,console.warn("Please use AV._config.APIServerURL to replace AV.serverURL, and it is an internal interface."));var s=l._config.APIServerURL||d.cn;if("/"!==s.charAt(s.length-1)&&(s+="/"),s+="1.1/"+t,e&&(s+="/"+e),n&&(s+="/"+n),"users"!==t&&"classes"!==t||!o||(s+="?",o._fetchWhenSave&&(delete o._fetchWhenSave,s+="&new=true"),o._where&&(s+="&where="+encodeURIComponent(JSON.stringify(o._where)),delete o._where)),"get"===i.toLowerCase()){s.indexOf("?")===-1&&(s+="?");for(var a in o)"object"===r(o[a])&&(o[a]=JSON.stringify(o[a])),s+="&"+a+"="+encodeURIComponent(o[a])}return s},b=function(t,e){return"number"!=typeof e&&(e=3600),u.setAsync("APIServerURL",t,1e3*e)},w=function(t){var e=new a;if(410===t.statusCode)b(t.response.api_server,t.response.ttl).then(function(){e.resolve(t.response.location)})["catch"](function(t){e.reject(t)});else{var n={code:-1,error:t.responseText};if(t.response&&t.response.code)n=t.response;else if(t.responseText)try{n=JSON.parse(t.responseText)}catch(r){}var i=new c(n.code,n.error);e.reject(i)}return e},A=function(t){l._config.APIServerURL="https://"+t;var e=f.findKey(d,function(t){return t===l._config.APIServerURL});e&&(l._config.region=e)},O=function(){var t="https://app-router.leancloud.cn/1/route?appId="+l.applicationId;return m("get",t).then(function(t){if(t.api_server)return A(t.api_server),b(t.api_server,t.ttl)},function(t){if(t.statusCode>=400&&t.statusCode<500)throw t})},x=function(){var t=arguments.length<=0||void 0===arguments[0]?"cn":arguments[0];h=new a;var e=h;return l._config.APIServerURL?void e.resolve():void("cn"===t?u.getAsync("APIServerURL").then(function(t){return t?void A(t):O()}).then(function(){e.resolve()})["catch"](function(t){e.reject(t)}):(l._config.region=t,l._config.APIServerURL=d[t],e.resolve()))},S=function(t,e,n,r){var i=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],o=arguments[5];if(!l.applicationId)throw new Error("You must specify your applicationId using AV.init()");if(!l.applicationKey&&!l.masterKey)throw new Error("You must specify a AppKey using AV.init()");return _(t),h?h.then(function(){var s=y(t,e,n,r,i);return g(o).then(function(t){return m(r,s,i,t).then(null,function(e){return w(e).then(function(e){return m(r,e,i,t)})})})}):a.error(new Error("Not initialized"))};t.exports={ajax:m,request:S,setServerUrlByRegion:x}}).call(e,n(27))},function(t,e,n){"use strict";function r(t,e){var n=new Error(e);return n.code=t,n}var i=n(0);i.extend(r,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,MISSING_CONTENT_TYPE:126,MISSING_CONTENT_LENGTH:127,INVALID_CONTENT_LENGTH:128,FILE_TOO_LARGE:129,FILE_SAVE_ERROR:130,FILE_DELETE_ERROR:153,DUPLICATE_VALUE:137,INVALID_ROLE_NAME:139,EXCEEDED_QUOTA:140,SCRIPT_FAILED:141,VALIDATION_ERROR:142,INVALID_IMAGE_DATA:150,UNSAVED_FILE_ERROR:151,INVALID_PUSH_TIME_ERROR:152,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252,X_DOMAIN_REQUEST:602}),t.exports=r},function(t,e,n){t.exports=n(9)(8)},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){"use strict";(function(e){var r=n(0),i=t.exports=function(t){this._resolved=!1,this._rejected=!1,this._resolvedCallbacks=[],this._rejectedCallbacks=[],this.doResolve(t)},o=function(t){return r.isNull(t)||r.isUndefined(t)},s=!1;"undefined"!=typeof e&&e.versions&&e.versions.node&&(s=!0),r.extend(i,{_isPromisesAPlusCompliant:!s,_debugError:!1,setPromisesAPlusCompliant:function(t){i._isPromisesAPlusCompliant=t},setDebugError:function(t){i._debugError=t},is:function(t){return t&&t.then&&r.isFunction(t.then)},as:function(){var t=new i;return arguments[0]&&r.isFunction(arguments[0].then)?arguments[0].then(function(e){t.resolve.call(t,e)},function(e){t.reject.call(t,e)}):t.resolve.apply(t,arguments),t},error:function(){var t=new i;return t.reject.apply(t,arguments),t},when:function(t){var e;e=t&&o(t.length)?arguments:t;var n=r.last(arguments);n=!!r.isBoolean(n)&&n;var s=e.length,a=!1,u=[],c=[];if(u.length=e.length,c.length=e.length,0===s)return n?i.as.call(this,u):i.as.apply(this,u);var l=new i,f=function(t){return s-=1,a&&!l._rejected&&n?void l.reject.call(l,c[t]):void(0===s&&(a&&!l._rejected?l.reject.call(l,c):n?l._rejected||l.resolve.call(l,u):l.resolve.apply(l,u)))};return r.each(e,function(t,e){i.is(t)?t.then(function(t){u[e]=t,f(e)},function(t){c[e]=t,a=!0,f(e)}):(u[e]=t,f(e))}),l},race:function(t){var e;e=t&&o(t.length)?arguments:t;var n=e.length,s=!1,a=[],u=[];if(a.length=u.length=e.length,0===n)return i.as.call(this);var c=new i,l=function(t){c._resolved||c._rejected||(s?c.reject.call(c,u[t]):c.resolve.call(c,a[t]))};return r.each(e,function(t,e){i.is(t)?t.then(function(t){a[e]=t,l(e)},function(t){u[e]=t,s=!0,l(e)}):(a[e]=t,l(e))}),c},_continueWhile:function(t,e){return t()?e().then(function(){return i._continueWhile(t,e)}):i.as()}}),i.all=function(t){return i.when(t,!0)},r.extend(i.prototype,{resolve:function(t){if(this._resolved||this._rejected)throw new Error("A promise was resolved even though it had already been "+(this._resolved?"resolved":"rejected")+".");this._resolved=!0,this._result=arguments;var e=arguments;r.each(this._resolvedCallbacks,function(t){t.apply(this,e)}),this._resolvedCallbacks=[],this._rejectedCallbacks=[]},doResolve:function(t){if(t){var e=!1,n=this;try{t(function(t){e||(e=!0,n.resolve.call(n,t))},function(t){e||(e=!0,n.reject.call(n,t))})}catch(r){if(e)return;e=!0,n.reject.call(n,r)}}},reject:function(t){if(this._resolved||this._rejected)throw new i("A promise was rejected even though it had already been "+(this._resolved?"resolved":"rejected")+".");this._rejected=!0,this._error=t,r.each(this._rejectedCallbacks,function(e){e(t)}),this._resolvedCallbacks=[],this._rejectedCallbacks=[]},then:function(t,n){var o=new i,s=function(){var e=arguments;if(t)if(i._isPromisesAPlusCompliant)try{e=[t.apply(this,e)]}catch(n){i._debugError&&n&&console.error("Error occurred in promise resolve callback.",n.stack||n),e=[i.error(n)]}else e=[t.apply(this,e)];1===e.length&&i.is(e[0])?e[0].then(function(){o.resolve.apply(o,arguments)},function(t){o.reject(t)}):o.resolve.apply(o,e)},a=function(t){var e=[];if(n){if(i._isPromisesAPlusCompliant)try{e=[n(t)]}catch(r){i._debugError&&r&&console.error("Error occurred in promise reject callback.",r.stack||r),e=[i.error(r)]}else e=[n(t)];1===e.length&&i.is(e[0])?e[0].then(function(){o.resolve.apply(o,arguments)},function(t){o.reject(t)}):i._isPromisesAPlusCompliant?o.resolve.apply(o,e):o.reject(e[0])}else o.reject(t)},u=function(t){t.call()};i._isPromisesAPlusCompliant&&("undefined"!=typeof window&&r.isFunction(window.setImmediate)?u=function(t){window.setImmediate(t)}:"undefined"!=typeof e&&e.nextTick?u=function(t){e.nextTick(t)}:"undefined"!=typeof setTimeout&&r.isFunction(setTimeout)&&(u=function(t){setTimeout(t,0)}));var c=this;return this._resolved?u(function(){s.apply(c,c._result)}):this._rejected?u(function(){a.apply(c,[c._error])}):(this._resolvedCallbacks.push(s),this._rejectedCallbacks.push(a)),o},"catch":function(t){return this.then(void 0,t)},always:function(t){return this.then(t,t)},done:function(t){return this.then(t)},fail:function(t){return this.then(null,t)},_thenRunCallbacks:function(t,e){var n;if(r.isFunction(t)){var o=t;n={success:function(t){o(t,null)},error:function(t){o(null,t)}}}else n=r.clone(t);return n=n||{},this.then(function(t){return n.success?n.success.apply(this,arguments):e&&e.trigger("sync",e,t,n),i.as.apply(i,arguments)},function(t){return n.error?r.isUndefined(e)?n.error(t):n.error(e,t):e&&e.trigger("error",e,t,n),i.error(t)})},_continueWith:function(t){return this.then(function(){return t(arguments,null)},function(e){return t(null,e)})}}),i.prototype["finally"]=i.prototype.always,i.prototype["try"]=i.prototype.done}).call(e,n(27))},,function(t,e,n){t.exports=n(9)(6)},function(t,e,n){var r=n(25);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(35)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(15),i=n(51);t.exports=n(12)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports={}},function(t,e,n){var r=n(11),i=n(90),o=n(111),s=Object.defineProperty;e.f=n(12)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=n(9)(10)},function(t,e,n){t.exports=n(9)(3)},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(10),s=i(o),a=n(6),u=i(a),c=n(74),l=r(c),f=n(75),h=r(f),d=n(78),p=i(d),_=n(76),v=i(_),m=n(77),g=i(m);s["default"].use(u["default"]),e["default"]=new u["default"].Store({actions:l,getters:h,modules:{topics:p["default"],admin:v["default"],global:g["default"]}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=r(i),s=n(42),a=r(s),u=n(18),c=r(u),l=n(136),f=r(l),h="M1SivUjmGWHTFDv6FpwYxTpl-gzGzoHsz",d="OwVDXgMCR09ztWdUIYGqG5Hl";f["default"].init({appId:h,appKey:d}),e["default"]={addUser:function(){var t=new f["default"].User;return t.setUsername("admin1"),t.setPassword("123456"),t.setEmail("admin1@mmxiaowu.com"),t.signUp()},login:function(t){return f["default"].User.logIn(t.username,t.password)},postTopic:function(t){var e=f["default"].Object.extend("article"),n=new e;for(var r in t)n.set(r,t[r]);return n.set("is_delete",0),n.set("visit",0),n.save()},getTopics:function(t){var e=new f["default"].Query("article");return 0===t.admin&&e.equalTo("is_delete",0),t.qs&&e.contains("title",t.qs),t.id&&e.equalTo("category",t.id),e.descending("createdAt"),e.limit(t.limit),e.skip((t.page-1)*t.limit),a["default"].all([e.count(),e.find()]).then(function(e){return c["default"].dispatch("gProgress",100),{list:e[1].map(function(t){return{_id:t.get("id"),title:t.get("title"),category:t.get("category"),content:t.get("content"),visit:t.get("visit"),is_delete:t.get("is_delete"),creat_date:t.get("createdAt")}}),total:e[0],hasNext:e[0]>t.page*t.limit,hasPrev:t.page>1}},function(t){c["default"].dispatch("showMsg",t.toString())})},getArticle:function(t){var e=new f["default"].Query("article"),n=new f["default"].Query("article"),r=new f["default"].Query("article");return n.equalTo("is_delete",0),n.ascending("createdAt"),n.limit(1),r.equalTo("is_delete",0),r.descending("createdAt"),r.limit(1),e.get(t.id).then(function(t){var e={_id:t.get("id"),title:t.get("title"),category:t.get("category"),content:t.get("content"),creat_date:t.get("createdAt"),visit:t.get("visit")};return n.greaterThan("createdAt",e.creat_date),r.lessThan("createdAt",e.creat_date),a["default"].all([n.first(),r.first()]).then(function(t){c["default"].dispatch("gProgress",100);
var n={data:e,prev:{},next:{}};return t[0]&&(n.prev={prev_id:t[0].get("id"),prev_title:t[0].get("title")}),t[1]&&(n.next={next_id:t[1].get("id"),next_title:t[1].get("title")}),n},function(t){c["default"].dispatch("showMsg",t.toString())})})},getAdminArticle:function(t){var e=new f["default"].Query("article");return e.get(t.id).then(function(t){return c["default"].dispatch("gProgress",100),{_id:t.get("id"),title:t.get("title"),category:t.get("category"),content:t.get("content")}},function(t){c["default"].dispatch("showMsg",t.toString())})},modifyAdminArticle:function(t,e){var n=f["default"].Object.createWithoutData("article",t);for(var r in e)n.set(r,e[r]);return n.save().then(function(t){return t},function(t){c["default"].dispatch("showMsg",t.toString())})},deleteArticle:function(t){var e=f["default"].Object.createWithoutData("article",t.id);return e.set("is_delete",1),e.save().then(function(t){return t},function(t){c["default"].dispatch("showMsg",t.toString())})},recoverArticle:function(t){var e=f["default"].Object.createWithoutData("article",t.id);return e.set("is_delete",0),e.save().then(function(t){return t},function(t){c["default"].dispatch("showMsg",t.toString())})},postComment:function(t){var e=f["default"].Object.extend("comment"),n=new e;for(var r in t)n.set(r,t[r]);return n.set("is_delete",0),n.save().then(function(e){return(0,o["default"])({},t,{id:e.id})},function(t){c["default"].dispatch("showMsg",t.toString())})},getComment:function(t){var e=new f["default"].Query("comment");return e.equalTo("article_id",t.id),e.descending("createdAt"),e.limit(t.limit),e.skip((t.page-1)*t.limit),a["default"].all([e.count(),e.find()]).then(function(e){return c["default"].dispatch("gProgress",100),{list:e[1].map(function(t){return{_id:t.get("id"),username:t.get("username"),content:t.get("content"),is_delete:t.get("is_delete"),creat_date:t.get("createdAt")}}),total:e[0],hasNext:e[0]>t.page*t.limit,hasPrev:t.page>1}},function(t){c["default"].dispatch("showMsg",t.toString())})}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.GLOBAL_LOADDING="GLOBAL_LOADDING",e.GLOBAL_PROGRESS="GLOBAL_PROGRESS",e.GLOBAL_SHOWMSG="GLOBAL_SHOWMSG",e.GLOBAL_HIDEMSG="GLOBAL_HIDEMSG",e.RECEIVE_TOPICS="RECEIVE_TOPICS",e.RECEIVE_ARTICLE="RECEIVE_ARTICLE",e.RECEIVE_COMMENT="RECEIVE_COMMENT",e.POST_COMMENT="POST_COMMENT",e.DELETE_ADMIN_TOPICS_PATH="DELETE_ADMIN_TOPICS_PATH",e.RECEIVE_ADMIN_TOPICS="RECEIVE_ADMIN_TOPICS",e.RECEIVE_ADMIN_ARTICLE="RECEIVE_ADMIN_ARTICLE",e.UPDATE_ADMIN_ARTICLE="UPDATE_ADMIN_ARTICLE",e.DELETE_ARTICLE="DELETE_ARTICLE",e.RECOVER_ARTICLE="RECOVER_ARTICLE"},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(32);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(3),i=n(7),o=n(22),s=n(13),a="prototype",u=function(t,e,n){var c,l,f,h=t&u.F,d=t&u.G,p=t&u.S,_=t&u.P,v=t&u.B,m=t&u.W,g=d?i:i[e]||(i[e]={}),y=g[a],b=d?r:p?r[e]:(r[e]||{})[a];d&&(n=e);for(c in n)l=!h&&b&&void 0!==b[c],l&&c in g||(f=l?b[c]:n[c],g[c]=d&&"function"!=typeof b[c]?n[c]:v&&l?o(f,r):m&&b[c]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[a]=t[a],e}(f):_&&"function"==typeof f?o(Function.call,f):f,_&&((g.virtual||(g.virtual={}))[c]=f,t&u.R&&y&&!y[c]&&s(y,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){function r(){}function i(t){if(!m(t))return t;var e=[];for(var n in t)o(e,n,t[n]);return e.join("&")}function o(t,e,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){o(t,e,n)});else if(m(n))for(var r in n)o(t,e+"["+r+"]",n[r]);else t.push(encodeURIComponent(e)+"="+encodeURIComponent(n));else null===n&&t.push(encodeURIComponent(e))}function s(t){for(var e,n,r={},i=t.split("&"),o=0,s=i.length;o<s;++o)e=i[o],n=e.indexOf("="),n==-1?r[decodeURIComponent(e)]="":r[decodeURIComponent(e.slice(0,n))]=decodeURIComponent(e.slice(n+1));return r}function a(t){var e,n,r,i,o=t.split(/\r?\n/),s={};o.pop();for(var a=0,u=o.length;a<u;++a)n=o[a],e=n.indexOf(":"),r=n.slice(0,e).toLowerCase(),i=y(n.slice(e+1)),s[r]=i;return s}function u(t){return/[\/+]json\b/.test(t)}function c(t){return t.split(/ *; */).shift()}function l(t){return t.split(/ *; */).reduce(function(t,e){var n=e.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(t[r]=i),t},{})}function f(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this._setStatusProperties(this.xhr.status),this.header=this.headers=a(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function h(t,e){var n=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new f(n)}catch(r){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=r,t.rawResponse=n.xhr&&n.xhr.responseText?n.xhr.responseText:null,t.statusCode=n.xhr&&n.xhr.status?n.xhr.status:null,n.callback(t)}n.emit("response",e);var i;try{(e.status<200||e.status>=300)&&(i=new Error(e.statusText||"Unsuccessful HTTP response"),i.original=t,i.response=e,i.status=e.status)}catch(r){i=r}i?n.callback(i,e):n.callback(null,e)})}function d(t,e){var n=g("DELETE",t);return e&&n.end(e),n}var p;"undefined"!=typeof window?p=window:"undefined"!=typeof self?p=self:(console.warn("Using browser-only version of superagent in non-browser environment"),p=this);var _=n(82),v=n(157),m=n(61),g=t.exports=n(158).bind(null,h);g.getXHR=function(){if(!(!p.XMLHttpRequest||p.location&&"file:"==p.location.protocol&&p.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw Error("Browser-only verison of superagent could not find XHR")};var y="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};g.serializeObject=i,g.parseString=s,g.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},g.serialize={"application/x-www-form-urlencoded":i,"application/json":JSON.stringify},g.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},f.prototype.get=function(t){return this.header[t.toLowerCase()]},f.prototype._setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=c(e);var n=l(e);for(var r in n)this[r]=n[r]},f.prototype._parseBody=function(t){var e=g.parse[this.type];return!e&&u(this.type)&&(e=g.parse["application/json"]),e&&t&&(t.length||t instanceof Object)?e(t):null},f.prototype._setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=(4==e||5==e)&&this.toError(),this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},f.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot "+e+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=e,i.url=n,i},g.Response=f,_(h.prototype);for(var b in v)h.prototype[b]=v[b];h.prototype.type=function(t){return this.set("Content-Type",g.types[t]||t),this},h.prototype.responseType=function(t){return this._responseType=t,this},h.prototype.accept=function(t){return this.set("Accept",g.types[t]||t),this},h.prototype.auth=function(t,e,n){switch(n||(n={type:"basic"}),n.type){case"basic":var r=btoa(t+":"+e);this.set("Authorization","Basic "+r);break;case"auto":this.username=t,this.password=e}return this},h.prototype.query=function(t){return"string"!=typeof t&&(t=i(t)),t&&this._query.push(t),this},h.prototype.attach=function(t,e,n){return this._getFormData().append(t,e,n||e.name),this},h.prototype._getFormData=function(){return this._formData||(this._formData=new p.FormData),this._formData},h.prototype.callback=function(t,e){var n=this._callback;this.clearTimeout(),n(t,e)},h.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},h.prototype._timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},h.prototype._appendQueryString=function(){var t=this._query.join("&");t&&(this.url+=~this.url.indexOf("?")?"&"+t:"?"+t)},h.prototype.end=function(t){var e=this,n=this.xhr=g.getXHR(),i=this._timeout,o=this._formData||this._data;this._callback=t||r,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(r){t=0}if(0==t){if(e.timedout)return e._timeoutError();if(e._aborted)return;return e.crossDomainError()}e.emit("end")}};var s=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),t.direction="download",e.emit("progress",t)};this.hasListeners("progress")&&(n.onprogress=s);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=s)}catch(a){}if(i&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},i)),this._appendQueryString(),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof o&&!this._isHost(o)){var c=this._header["content-type"],l=this._serializer||g.serialize[c?c.split(";")[0]:""];!l&&u(c)&&(l=g.serialize["application/json"]),l&&(o=l(o))}for(var f in this.header)null!=this.header[f]&&n.setRequestHeader(f,this.header[f]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send("undefined"!=typeof o?o:null),this},g.Request=h,g.get=function(t,e,n){var r=g("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},g.head=function(t,e,n){var r=g("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},g.options=function(t,e,n){var r=g("OPTIONS",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},g.del=d,g["delete"]=d,g.patch=function(t,e,n){var r=g("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},g.post=function(t,e,n){var r=g("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},g.put=function(t,e,n){var r=g("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}},function(t,e,n){t.exports=n(9)(2)},,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(81),o=r(i);e["default"]=function(t,e,n){return e in t?(0,o["default"])(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},,function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(25),i=n(3).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(15).f,i=n(24),o=n(2)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(52)("keys"),i=n(56);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(47),i=n(33);t.exports=function(t){return r(i(t))}},function(t,e,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var t=arguments,n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,o=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r),t}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(n){}}function a(){var t;try{t=e.storage.debug}catch(n){}return t}function u(){try{return window.localStorage}catch(t){}}e=t.exports=n(121),e.log=o,e.formatArgs=i,e.save=s,e.load=a,e.useColors=r,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(a())},function(t,e,n){"use strict";(function(e){t.exports=e.AV||{}}).call(e,n(16))},function(t,e,n){t.exports={"default":n(85),__esModule:!0}},function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},function(t,e,n){var r=n(21),i=n(2)("toStringTag"),o="Arguments"==r(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){t.exports=n(3).document&&document.documentElement},function(t,e,n){var r=n(21);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var r=n(49),i=n(23),o=n(106),s=n(13),a=n(24),u=n(14),c=n(94),l=n(36),f=n(102),h=n(2)("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",_="keys",v="values",m=function(){return this};t.exports=function(t,e,n,g,y,b,w){c(n,e,g);var A,O,x,S=function(t){if(!d&&t in T)return T[t];switch(t){case _:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},E=e+" Iterator",C=y==v,j=!1,T=t.prototype,N=T[h]||T[p]||y&&T[y],I=N||S(y),P=y?C?S("entries"):I:void 0,R="Array"==e?T.entries||N:N;if(R&&(x=f(R.call(new t)),x!==Object.prototype&&(l(x,E,!0),r||a(x,h)||s(x,h,m))),C&&N&&N.name!==v&&(j=!0,I=function(){return N.call(this)}),r&&!w||!d&&!j&&T[h]||s(T,h,I),u[e]=I,u[E]=m,y)if(A={values:C?I:S(v),keys:b?I:S(_),entries:P},w)for(O in A)O in T||o(T,O,A[O]);else i(i.P+i.F*(d||j),e,A);return A}},function(t,e){t.exports=!0},function(t,e,n){var r=n(103),i=n(45);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(3),i="__core-js_shared__",o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var r,i,o,s=n(22),a=n(91),u=n(46),c=n(34),l=n(3),f=l.process,h=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,_=0,v={},m="onreadystatechange",g=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},y=function(t){g.call(t.data)};h&&d||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return v[++_]=function(){a("function"==typeof t?t:Function(t),e)},r(_),_},d=function(t){delete v[t]},"process"==n(21)(f)?r=function(t){f.nextTick(s(g,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=y,r=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",y,!1)):r=m in c("script")?function(t){u.appendChild(c("script"))[m]=function(){u.removeChild(this),g.call(t)}}:function(t){setTimeout(s(g,t,1),0)}),t.exports={set:h,clear:d}},function(t,e,n){var r=n(38),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(33);t.exports=function(t){return Object(r(t))}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){},function(t,e,n){"use strict";var r=n(59),i=n(41),o=e.removeAsync=r.removeItemAsync.bind(r),s=function(t,e){try{t=JSON.parse(t)}catch(n){return null}if(t){var r=t.expiredAt&&t.expiredAt<Date.now();return r?o(e).then(function(){return null}):t.value}return null};e.getAsync=function(t){return t=i.applicationId+"/"+t,r.getItemAsync(t).then(function(e){return s(e,t)})},e.setAsync=function(t,e,n){var o={value:e};return"number"==typeof n&&(o.expiredAt=Date.now()+n),r.setItemAsync(i.applicationId+"/"+t,JSON.stringify(o))}},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(130),s=["getItem","setItem","removeItem","clear"];o.async?r(s).each(function(t){"function"!=typeof o[t]&&(o[t]=function(){var e=new Error("Synchronous API ["+t+"] is not available in this runtime.");throw e.code="SYNC_API_NOT_AVAILABLE",e})}):r(s).each(function(t){"function"==typeof o[t]&&(o[t+"Async"]=function(){return i.as(o[t].apply(o,arguments))})}),t.exports=o},function(t,e,n){"use strict";(function(e){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=n(0),o=n(4),s=function(t){return i.isNull(t)||i.isUndefined(t)},a=function(t){return i.isArray(t)?t:void 0===t||null===t?[]:[t]},u=function(t){var n=t._config;i.extend(n,{region:"cn",APIServerURL:n.APIServerURL||"",isNode:!1,disableCurrentUser:!1,userAgent:null,applicationProduction:null}),"undefined"!=typeof e&&e.versions&&e.versions.node&&(n.isNode=!0);var a=function(){},u=function(t,e,n){var r;return r=e&&e.hasOwnProperty("constructor")?e.constructor:function(){t.apply(this,arguments)},i.extend(r,t),a.prototype=t.prototype,r.prototype=new a,e&&i.extend(r.prototype,e),n&&i.extend(r,n),r.prototype.constructor=r,r.__super__=t.prototype,r},c=function(e,n,r){t.applicationId&&e!==t.applicationId&&n!==t.applicationKey&&r!==t.masterKey&&console.warn("LeanCloud SDK is already initialized, please do not reinitialize it."),t.applicationId=e,t.applicationKey=n,t.masterKey=r,t._useMasterKey=!1};t.init=function(){var t=function(){console.warn("MasterKey should not be used in the browser. The permissions of MasterKey can be across all the server permissions, including the setting of ACL .")};switch(arguments.length){case 1:var e=arguments.length<=0?void 0:arguments[0];if("object"!==("undefined"==typeof e?"undefined":r(e)))throw new Error("AV.init(): Parameter is not correct.");!n.isNode&&e.masterKey&&t(),c(e.appId,e.appKey,e.masterKey),o.setServerUrlByRegion(e.region),n.disableCurrentUser=e.disableCurrentUser;break;case 2:case 3:console.warn("Please use AV.init() to replace AV.initialize(), AV.init() need an Object param, like { appId: 'YOUR_APP_ID', appKey: 'YOUR_APP_KEY' } . Docs: https://leancloud.cn/docs/sdk_setup-js.html"),n.isNode||3!==arguments.length||t(),c.apply(void 0,arguments),o.setServerUrlByRegion("cn")}},n.isNode&&(t.Cloud=t.Cloud||{},t.Cloud.useMasterKey=function(){t._useMasterKey=!0}),t.initialize=t.init,t.setProduction=function(t){s(t)?n.applicationProduction=null:n.applicationProduction=t?1:0},t.useAVCloudCN=function(){o.setServerUrlByRegion("cn"),console.warn("Do not use AV.useAVCloudCN. Please use AV.init(), you can set the region of server.")},t.useAVCloudUS=function(){o.setServerUrlByRegion("us"),console.warn("Do not use AV.useAVCloudUS. Please use AV.init(), you can set the region of server.")},t._getAVPath=function(e){if(!t.applicationId)throw"You need to call AV.initialize before using AV.";if(e||(e=""),!i.isString(e))throw"Tried to get a localStorage path that wasn't a String.";return"/"===e[0]&&(e=e.substring(1)),"AV/"+t.applicationId+"/"+e},t._installationId=null,t._getInstallationId=function(){if(t._installationId)return t.Promise.as(t._installationId);var e=t._getAVPath("installationId");return t.localStorage.getItemAsync(e).then(function(n){if(t._installationId=n,t._installationId)return n;var r=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t._installationId=r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r(),t.localStorage.setItemAsync(e,t._installationId)})},t._parseDate=function(t){var e=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$"),n=e.exec(t);if(!n)return null;var r=n[1]||0,i=(n[2]||1)-1,o=n[3]||0,s=n[4]||0,a=n[5]||0,u=n[6]||0,c=n[8]||0;return new Date(Date.UTC(r,i,o,s,a,u,c))},t._ajax=function(){console.warn("AV._ajax is deprecated, and will be removed in next release."),o.ajax.apply(o,arguments)},t._request=function(){console.warn("AV._request is deprecated, and will be removed in next release."),o.request.apply(o,arguments)},t._extend=function(t,e){var n=u(this,t,e);return n.extend=this.extend,n},t._getValue=function(t,e){return t&&t[e]?i.isFunction(t[e])?t[e]():t[e]:null},t._encode=function(e,n,r){if(e instanceof t.Object){if(r)throw"AV.Objects not allowed here";if(!n||i.include(n,e)||!e._hasData)return e._toPointer();if(!e.dirty())return n=n.concat(e),t._encode(e._toFullJSON(n),n,r);throw"Tried to save an object with a pointer to a new, unsaved object."}if(e instanceof t.ACL)return e.toJSON();if(i.isDate(e))return{__type:"Date",iso:e.toJSON()};if(e instanceof t.GeoPoint)return e.toJSON();if(i.isArray(e))return i.map(e,function(e){return t._encode(e,n,r)});if(i.isRegExp(e))return e.source;if(e instanceof t.Relation)return e.toJSON();if(e instanceof t.Op)return e.toJSON();if(e instanceof t.File){if(!e.url()&&!e.id)throw"Tried to save an object containing an unsaved file.";return{__type:"File",id:e.id,name:e.name(),url:e.url()}}if(i.isObject(e)){var o={};return t._objectEach(e,function(e,i){o[i]=t._encode(e,n,r)}),o}return e},t._decode=function(e,n){if(!i.isObject(n))return n;if(i.isArray(n))return t._arrayEach(n,function(e,r){n[r]=t._decode(r,e)}),n;if(n instanceof t.Object)return n;if(n instanceof t.File)return n;if(n instanceof t.Op)return n;if(n.__op)return t.Op._decode(n);var r;if("Pointer"===n.__type){r=n.className;var o=t.Object._create(r);return Object.keys(n).length>3?(delete n.__type,delete n.className,o._finishFetch(n,!0)):o._finishFetch({objectId:n.objectId},!1),o}if("Object"===n.__type){r=n.className,delete n.__type,delete n.className;var s=t.Object._create(r);return s._finishFetch(n,!0),s}if("Date"===n.__type)return t._parseDate(n.iso);if("GeoPoint"===n.__type)return new t.GeoPoint({latitude:n.latitude,longitude:n.longitude});if("ACL"===e)return n instanceof t.ACL?n:new t.ACL(n);if("Relation"===n.__type){var a=new t.Relation(null,e);return a.targetClassName=n.className,a}if("File"===n.__type){var u=new t.File(n.name);return u.attributes.metaData=n.metaData||{},u.attributes.url=n.url,u.id=n.objectId,u}return t._objectEach(n,function(e,r){n[r]=t._decode(r,e)}),n},t._encodeObjectOrArray=function(e){var n=function(e){return e&&e._toFullJSON&&(e=e._toFullJSON([])),i.mapObject(e,function(e){return t._encode(e,[])})};return i.isArray(e)?e.map(function(t){return n(t)}):n(e)},t._arrayEach=i.each,t._traverse=function(e,n,r){if(e instanceof t.Object){if(r=r||[],i.indexOf(r,e)>=0)return;return r.push(e),t._traverse(e.attributes,n,r),n(e)}return e instanceof t.Relation||e instanceof t.File?n(e):i.isArray(e)?(i.each(e,function(i,o){var s=t._traverse(i,n,r);s&&(e[o]=s)}),n(e)):i.isObject(e)?(t._each(e,function(i,o){var s=t._traverse(i,n,r);s&&(e[o]=s)}),n(e)):n(e)},t._objectEach=t._each=function(t,e){i.isObject(t)?i.each(i.keys(t),function(n){e(t[n],n)}):i.each(t,e)}};t.exports={init:u,isNullOrUndefined:s,ensureArray:a}}).call(e,n(27))},function(t,e){function n(t){return null!==t&&"object"==typeof t}t.exports=n},,,,,,,,,,,,,function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.recoverArticle=e.deleteArticle=e.getAdminArticle=e.getAdminTopics=e.postComment=e.getComment=e.getArticle=e.getTopics=e.hideMsg=e.showMsg=e.gProgress=void 0;var o=n(1),s=i(o),a=n(20),u=r(a),c=n(19),l=i(c),f=n(159),h=i(f);h["default"].options.positionClass="toast-top-center";e.gProgress=function(t,e){var n=t.commit;n(u.GLOBAL_PROGRESS,e)},e.showMsg=function(t,e){var n=(t.commit,void 0),r=void 0;"string"==typeof e?(n=e,r="error"):(n=e.content,r=e.type),h["default"][r](n)},e.hideMsg=function(){h["default"].clear()},e.getTopics=function(t,e){var n=t.commit,r=t.state.route.path;return l["default"].getTopics(e).then(function(t){n(u.RECEIVE_TOPICS,(0,s["default"])({},e,t,{path:r}))})},e.getArticle=function(t){var e=t.commit,n=t.state.route.params.id;return l["default"].getArticle({action:"article",markdown:1,id:n}).then(function(t){e(u.RECEIVE_ARTICLE,(0,s["default"])({},t))})},e.getComment=function(t,e){var n=t.commit,r=t.state.route,i=r.path,o=r.params.id,a=e.page,c=e.limit;return l["default"].getComment({action:"comment",page:a,id:o,limit:c}).then(function(t){n(u.RECEIVE_COMMENT,(0,s["default"])({},t,{page:a,path:i}))})},e.postComment=function(t,e){var n=t.commit,r=t.state.route;r.path,r.params.id;return l["default"].postComment(e).then(function(t){n(u.POST_COMMENT,t)})},e.getAdminTopics=function(t,e){var n=t.commit,r=t.state.route,i=r.path,o=r.params.page;return e.page=o,l["default"].getTopics(e).then(function(t){n(u.RECEIVE_ADMIN_TOPICS,(0,s["default"])({},t,{path:i}))})},e.getAdminArticle=function(t){var e=t.state.route.params.id;return l["default"].getAdminArticle({action:"getArticle",id:e})},e.deleteArticle=function(t,e){var n=t.commit;l["default"].deleteArticle(e).then(function(){n(u.DELETE_ARTICLE,e.id)})},e.recoverArticle=function(t,e){var n=t.commit;l["default"].recoverArticle(e).then(function(){n(u.RECOVER_ARTICLE,e.id)})}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.getGlobal=function(t){return t.global},e.getTopics=function(t){return t.topics.topic},e.getArticle=function(t){return t.topics.article},e.getComment=function(t){return t.topics.comment},e.getAdminTopics=function(t){return t.admin.topic},e.getAdminArticle=function(t){return t.admin.article}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(30),s=r(o),a=n(20),u={topic:{list:[],path:"",hasNext:0,hasPrev:0},article:{}},c=(i={},(0,s["default"])(i,a.RECEIVE_ADMIN_TOPICS,function(t,e){var n=e.list,r=e.path,i=e.hasNext,o=e.hasPrev;t.topic.list=n,t.topic.path=r,t.topic.hasNext=i,t.topic.hasPrev=o}),(0,s["default"])(i,a.DELETE_ADMIN_TOPICS_PATH,function(t){t.topic.path=""}),(0,s["default"])(i,a.RECEIVE_ADMIN_ARTICLE,function(t,e){var n=e.data;t.article=n}),(0,s["default"])(i,a.UPDATE_ADMIN_ARTICLE,function(t,e){var n=t.topic.list.find(function(t){return t._id===e.id});for(var r in n)n.hasOwnProperty(r)&&e[r]&&(n[r]=e[r])}),(0,s["default"])(i,a.DELETE_ARTICLE,function(t,e){var n=t.topic.list.find(function(t){return t._id===e});n.is_delete=1}),(0,s["default"])(i,a.RECOVER_ARTICLE,function(t,e){var n=t.topic.list.find(function(t){return t._id===e});n.is_delete=0}),i);e["default"]={state:u,mutations:c}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(30),s=r(o),a=n(1),u=r(a),c=n(20),l={loading:!1,progress:0,message:{type:"",content:"",title:""}},f=(i={},(0,s["default"])(i,c.GLOBAL_LOADDING,function(t,e){t.loading=e}),(0,s["default"])(i,c.GLOBAL_PROGRESS,function(t,e){t.progress=e}),(0,s["default"])(i,c.GLOBAL_SHOWMSG,function(t,e){t.message=(0,u["default"])({},e)}),(0,s["default"])(i,c.GLOBAL_HIDEMSG,function(t){t.message={type:"",content:"",title:""}}),i);e["default"]={state:l,mutations:f}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(30),s=r(o),a=n(20),u={topic:{list:[],hasNext:0,page:1,path:""},article:{data:{},prev:{},next:{}},comment:{list:[],hasNext:0,page:1,path:""}},c=(i={},(0,s["default"])(i,a.RECEIVE_TOPICS,function(t,e){var n=e.hasNext,r=e.list,i=e.page,o=e.path;1===i?t.topic.list=[].concat(r):t.topic.list=t.topic.list.concat(r),t.topic.hasNext=n,t.topic.page=i,t.topic.path=o}),(0,s["default"])(i,a.RECEIVE_ARTICLE,function(t,e){var n=e.data,r=e.prev,i=e.next;t.article.data=n,t.article.prev=r,t.article.next=i}),(0,s["default"])(i,a.RECEIVE_COMMENT,function(t,e){var n=e.hasNext,r=e.list,i=e.path,o=e.page;1===o?t.comment.list=[].concat(r):t.comment.list=t.comment.list.concat(r),t.comment.hasNext=n,t.comment.path=i,t.comment.page=o}),(0,s["default"])(i,a.POST_COMMENT,function(t,e){t.comment.list=[e].concat(t.comment.list)}),i);e["default"]={state:u,mutations:c}},,function(t,e,n){t.exports={"default":n(83),__esModule:!0}},function(t,e,n){t.exports={"default":n(84),__esModule:!0}},function(t,e,n){function r(t){if(t)return i(t)}function i(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){n(114),t.exports=n(7).Object.assign},function(t,e,n){n(115);var r=n(7).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){n(116),n(118),n(119),n(117),t.exports=n(7).Promise},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e,n,r){
if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(39),i=n(54),o=n(110);t.exports=function(t){return function(e,n,s){var a,u=r(e),c=i(u.length),l=o(s,c);if(t&&n!=n){for(;c>l;)if(a=u[l++],a!=a)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(22),i=n(93),o=n(92),s=n(11),a=n(54),u=n(112),c={},l={},e=t.exports=function(t,e,n,f,h){var d,p,_,v,m=h?function(){return t}:u(t),g=r(n,f,e?2:1),y=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(o(m)){for(d=a(t.length);d>y;y++)if(v=e?g(s(p=t[y])[0],p[1]):g(t[y]),v===c||v===l)return v}else for(_=m.call(t);!(p=_.next()).done;)if(v=i(_,g,p.value,e),v===c||v===l)return v};e.BREAK=c,e.RETURN=l},function(t,e,n){t.exports=!n(12)&&!n(35)(function(){return 7!=Object.defineProperty(n(34)("div"),"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(14),i=n(2)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(11);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(o){var s=t["return"];throw void 0!==s&&r(s.call(t)),o}}},function(t,e,n){"use strict";var r=n(99),i=n(51),o=n(36),s={};n(13)(s,n(2)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(2)("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(s){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},t(o)}catch(a){}return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(3),i=n(53).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,u="process"==n(21)(s);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=s.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(o){throw t?n():e=void 0,o}}e=void 0,r&&r.enter()};if(u)n=function(){s.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(a&&a.resolve){var h=a.resolve();n=function(){h.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){"use strict";var r=n(50),i=n(101),o=n(104),s=n(55),a=n(47),u=Object.assign;t.exports=!u||n(35)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=s(t),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var h,d=a(arguments[c++]),p=l?r(d).concat(l(d)):r(d),_=p.length,v=0;_>v;)f.call(d,h=p[v++])&&(n[h]=d[h]);return n}:u},function(t,e,n){var r=n(11),i=n(100),o=n(45),s=n(37)("IE_PROTO"),a=function(){},u="prototype",c=function(){var t,e=n(34)("iframe"),r=o.length,i="<",s=">";for(e.style.display="none",n(46).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+s+"document.F=Object"+i+"/script"+s),t.close(),c=t.F;r--;)delete c[u][o[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(a[u]=r(t),n=new a,a[u]=null,n[s]=t):n=c(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(15),i=n(11),o=n(50);t.exports=n(12)?Object.defineProperties:function(t,e){i(t);for(var n,s=o(e),a=s.length,u=0;a>u;)r.f(t,n=s[u++],e[n]);return t}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(24),i=n(55),o=n(37)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var r=n(24),i=n(39),o=n(88)(!1),s=n(37)("IE_PROTO");t.exports=function(t,e){var n,a=i(t),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(13);t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},function(t,e,n){t.exports=n(13)},function(t,e,n){"use strict";var r=n(3),i=n(7),o=n(15),s=n(12),a=n(2)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];s&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(11),i=n(32),o=n(2)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||void 0==(n=r(s)[o])?e:i(n)}},function(t,e,n){var r=n(38),i=n(33);t.exports=function(t){return function(e,n){var o,s,a=String(i(e)),u=r(n),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u),o<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):(o-55296<<10)+(s-56320)+65536)}}},function(t,e,n){var r=n(38),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(25);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(44),i=n(2)("iterator"),o=n(14);t.exports=n(7).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){"use strict";var r=n(86),i=n(96),o=n(14),s=n(39);t.exports=n(48)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(23);r(r.S+r.F,"Object",{assign:n(98)})},function(t,e,n){var r=n(23);r(r.S+r.F*!n(12),"Object",{defineProperty:n(15).f})},function(t,e){},function(t,e,n){"use strict";var r,i,o,s=n(49),a=n(3),u=n(22),c=n(44),l=n(23),f=n(25),h=n(32),d=n(87),p=n(89),_=n(108),v=n(53).set,m=n(97)(),g="Promise",y=a.TypeError,b=a.process,w=a[g],b=a.process,A="process"==c(b),O=function(){},x=!!function(){try{var t=w.resolve(1),e=(t.constructor={})[n(2)("species")]=function(t){t(O,O)};return(A||"function"==typeof PromiseRejectionEvent)&&t.then(O)instanceof e}catch(r){}}(),S=function(t,e){return t===e||t===w&&e===o},E=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},C=function(t){return S(w,t)?new j(t):new i(t)},j=i=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw y("Bad Promise constructor");e=t,n=r}),this.resolve=h(e),this.reject=h(n)},T=function(t){try{t()}catch(e){return{error:e}}},N=function(t,e){if(!t._n){t._n=!0;var n=t._c;m(function(){for(var r=t._v,i=1==t._s,o=0,s=function(e){var n,o,s=i?e.ok:e.fail,a=e.resolve,u=e.reject,c=e.domain;try{s?(i||(2==t._h&&R(t),t._h=1),s===!0?n=r:(c&&c.enter(),n=s(r),c&&c.exit()),n===e.promise?u(y("Promise-chain cycle")):(o=E(n))?o.call(n,a,u):a(n)):u(r)}catch(l){u(l)}};n.length>o;)s(n[o++]);t._c=[],t._n=!1,e&&!t._h&&I(t)})}},I=function(t){v.call(a,function(){var e,n,r,i=t._v;if(P(t)&&(e=T(function(){A?b.emit("unhandledRejection",i,t):(n=a.onunhandledrejection)?n({promise:t,reason:i}):(r=a.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=A||P(t)?2:1),t._a=void 0,e)throw e.error})},P=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if(e=n[r++],e.fail||!P(e.promise))return!1;return!0},R=function(t){v.call(a,function(){var e;A?b.emit("rejectionHandled",t):(e=a.onrejectionhandled)&&e({promise:t,reason:t._v})})},U=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),N(e,!0))},k=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw y("Promise can't be resolved itself");(e=E(t))?m(function(){var r={_w:n,_d:!1};try{e.call(t,u(k,r,1),u(U,r,1))}catch(i){U.call(r,i)}}):(n._v=t,n._s=1,N(n,!1))}catch(r){U.call({_w:n,_d:!1},r)}}};x||(w=function(t){d(this,w,g,"_h"),h(t),r.call(this);try{t(u(k,this,1),u(U,this,1))}catch(e){U.call(this,e)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(105)(w.prototype,{then:function(t,e){var n=C(_(this,w));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=A?b.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&N(this,!1),n.promise},"catch":function(t){return this.then(void 0,t)}}),j=function(){var t=new r;this.promise=t,this.resolve=u(k,t,1),this.reject=u(U,t,1)}),l(l.G+l.W+l.F*!x,{Promise:w}),n(36)(w,g),n(107)(g),o=n(7)[g],l(l.S+l.F*!x,g,{reject:function(t){var e=C(this),n=e.reject;return n(t),e.promise}}),l(l.S+l.F*(s||!x),g,{resolve:function(t){if(t instanceof w&&S(t.constructor,this))return t;var e=C(this),n=e.resolve;return n(t),e.promise}}),l(l.S+l.F*!(x&&n(95)(function(t){w.all(t)["catch"](O)})),g,{all:function(t){var e=this,n=C(e),r=n.resolve,i=n.reject,o=T(function(){var n=[],o=0,s=1;p(t,!1,function(t){var a=o++,u=!1;n.push(void 0),s++,e.resolve(t).then(function(t){u||(u=!0,n[a]=t,--s||r(n))},i)}),--s||r(n)});return o&&i(o.error),n.promise},race:function(t){var e=this,n=C(e),r=n.reject,i=T(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(t,e,n){"use strict";var r=n(109)(!0);n(48)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){n(113);for(var r=n(3),i=n(13),o=n(14),s=n(2)("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=a[u],l=r[c],f=l&&l.prototype;f&&!f[s]&&i(f,s,c),o[c]=o.Array}},function(t,e){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?n.push(e.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.indexOf(t.charAt(r))>>>6-2*i);return n}};t.exports=n}()},function(t,e,n){function r(){return e.colors[l++%e.colors.length]}function i(t){function n(){}function i(){var t=i,n=+new Date,o=n-(c||n);t.diff=o,t.prev=c,t.curr=n,c=n,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=r());var s=Array.prototype.slice.call(arguments);s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;a++;var i=e.formatters[r];if("function"==typeof i){var o=s[a];n=i.call(t,o),s.splice(a,1),a--}return n}),"function"==typeof e.formatArgs&&(s=e.formatArgs.apply(t,s));var u=i.log||e.log||console.log.bind(console);u.apply(t,s)}n.enabled=!1,i.enabled=!0;var o=e.enabled(t)?i:n;return o.namespace=t,o}function o(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&(t=n[i].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1}function u(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=i,e.coerce=u,e.disable=s,e.enable=o,e.enabled=a,e.humanize=n(153),e.names=[],e.skips=[],e.formatters={};var c,l=0},,,,,,function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function r(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(n(t)||r(t)||!!t._isBuffer)}},,function(t,e,n){"use strict";var r=n(0);t.exports=function(t){var e="*";t.ACL=function(e){var n=this;if(n.permissionsById={},r.isObject(e))if(e instanceof t.User)n.setReadAccess(e,!0),n.setWriteAccess(e,!0);else{if(r.isFunction(e))throw"AV.ACL() called with a function.  Did you forget ()?";t._objectEach(e,function(e,i){if(!r.isString(i))throw"Tried to create an ACL with an invalid userId.";n.permissionsById[i]={},t._objectEach(e,function(t,e){if("read"!==e&&"write"!==e)throw"Tried to create an ACL with an invalid permission type.";if(!r.isBoolean(t))throw"Tried to create an ACL with an invalid permission value.";n.permissionsById[i][e]=t})})}},t.ACL.prototype.toJSON=function(){return r.clone(this.permissionsById)},t.ACL.prototype._setAccess=function(e,n,i){if(n instanceof t.User?n=n.id:n instanceof t.Role&&(n="role:"+n.getName()),!r.isString(n))throw"userId must be a string.";if(!r.isBoolean(i))throw"allowed must be either true or false.";var o=this.permissionsById[n];if(!o){if(!i)return;o={},this.permissionsById[n]=o}i?this.permissionsById[n][e]=!0:(delete o[e],r.isEmpty(o)&&delete o[n])},t.ACL.prototype._getAccess=function(e,n){n instanceof t.User?n=n.id:n instanceof t.Role&&(n="role:"+n.getName());var r=this.permissionsById[n];return!!r&&!!r[e]},t.ACL.prototype.setReadAccess=function(t,e){this._setAccess("read",t,e)},t.ACL.prototype.getReadAccess=function(t){return this._getAccess("read",t)},t.ACL.prototype.setWriteAccess=function(t,e){this._setAccess("write",t,e)},t.ACL.prototype.getWriteAccess=function(t){return this._getAccess("write",t)},t.ACL.prototype.setPublicReadAccess=function(t){this.setReadAccess(e,t)},t.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(e)},t.ACL.prototype.setPublicWriteAccess=function(t){this.setWriteAccess(e,t)},t.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(e)},t.ACL.prototype.getRoleReadAccess=function(e){if(e instanceof t.Role&&(e=e.getName()),r.isString(e))return this.getReadAccess("role:"+e);throw"role must be a AV.Role or a String"},t.ACL.prototype.getRoleWriteAccess=function(e){if(e instanceof t.Role&&(e=e.getName()),r.isString(e))return this.getWriteAccess("role:"+e);throw"role must be a AV.Role or a String"},t.ACL.prototype.setRoleReadAccess=function(e,n){if(e instanceof t.Role&&(e=e.getName()),r.isString(e))return void this.setReadAccess("role:"+e,n);throw"role must be a AV.Role or a String"},t.ACL.prototype.setRoleWriteAccess=function(e,n){if(e instanceof t.Role&&(e=e.getName()),r.isString(e))return void this.setWriteAccess("role:"+e,n);throw"role must be a AV.Role or a String"}}},function(t,e,n){"use strict";(function(e){var r=n(0),i=n(8),o={},s=["getItem","setItem","removeItem","clear"];if(e.localStorage){var a=e.localStorage;try{var u="__storejs__";if(a.setItem(u,u),a.getItem(u)!=u)throw new Error;a.removeItem(u)}catch(c){a=n(151)}r(s).each(function(t){o[t]=function(){return e.localStorage[t].apply(e.localStorage,arguments)}}),o.async=!1}else{var l=n(161).AsyncStorage;r(s).each(function(t){o[t+"Async"]=function(){return i.as(l[t].apply(l,arguments))}}),o.async=!0}t.exports=o}).call(e,n(16))},function(t,e){"use strict";var n=function(t,e){var n;n=t.indexOf("base64")<0?atob(t):t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var r=e||t.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(n.length),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([i],{type:r})};t.exports=n},function(t,e,n){"use strict";var r=n(0),i=n(4).request;t.exports=function(t){t.Cloud=t.Cloud||{},r.extend(t.Cloud,{run:function(e,n,r){var o=i("functions",e,null,"POST",t._encode(n,null,!0),r&&r.sessionToken);return o.then(function(e){return t._decode(null,e).result})._thenRunCallbacks(r)},rpc:function(e,n,o){return r.isArray(n)?t.Promise.error(new Error("Can't pass Array as the param of rpc function in JavaScript SDK."))._thenRunCallbacks(o):i("call",e,null,"POST",t._encodeObjectOrArray(n),o&&o.sessionToken).then(function(e){return t._decode("",e).result})._thenRunCallbacks(o)},getServerDate:function(e){var n=i("date",null,null,"GET");return n.then(function(e){return t._decode(null,e)})._thenRunCallbacks(e)},requestSmsCode:function(t,e){if(r.isString(t)&&(t={mobilePhoneNumber:t}),!t.mobilePhoneNumber)throw"Missing mobilePhoneNumber.";var n=i("requestSmsCode",null,null,"POST",t);return n._thenRunCallbacks(e)},verifySmsCode:function(t,e,n){if(!t)throw"Missing sms code.";var o={};r.isString(e)?o.mobilePhoneNumber=e:n=e;var s=i("verifySmsCode",t,null,"POST",o);return s._thenRunCallbacks(n)}})}},function(t,e){"use strict";t.exports=function(t){var e=/\s+/,n=Array.prototype.slice;t.Events={on:function(t,n,r){var i,o,s,a,u;if(!n)return this;for(t=t.split(e),i=this._callbacks||(this._callbacks={}),o=t.shift();o;)u=i[o],s=u?u.tail:{},s.next=a={},s.context=r,s.callback=n,i[o]={tail:a,next:u?u.next:s},o=t.shift();return this},off:function(t,n,r){var i,o,s,a,u,c;if(o=this._callbacks){if(!(t||n||r))return delete this._callbacks,this;for(t=t?t.split(e):_.keys(o),i=t.shift();i;)if(s=o[i],delete o[i],s&&(n||r)){for(a=s.tail,s=s.next;s!==a;)u=s.callback,c=s.context,(n&&u!==n||r&&c!==r)&&this.on(i,u,c),s=s.next;i=t.shift()}return this}},trigger:function(t){var r,i,o,s,a,u,c;if(!(o=this._callbacks))return this;for(u=o.all,t=t.split(e),c=n.call(arguments,1),r=t.shift();r;){if(i=o[r])for(s=i.tail;(i=i.next)!==s;)i.callback.apply(i.context||this,c);if(i=u)for(s=i.tail,a=[r].concat(c);(i=i.next)!==s;)i.callback.apply(i.context||this,a);r=t.shift()}return this}},t.Events.bind=t.Events.on,t.Events.unbind=t.Events.off}},function(t,e,n){"use strict";(function(e){var r=n(0),i=n(146),o=n(147),s=n(148),a=n(5),u=n(4).request;t.exports=function(t){var c=(t._config,function(t){return t.match(/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/)[4]}),l=function(t){if(t<26)return String.fromCharCode(65+t);if(t<52)return String.fromCharCode(97+(t-26));if(t<62)return String.fromCharCode(48+(t-52));if(62===t)return"+";if(63===t)return"/";throw new Error("Tried to encode large digit "+t+" in base64.")},f=function(t){var e=[];return e.length=Math.ceil(t.length/3),r.times(e.length,function(n){var r=t[3*n],i=t[3*n+1]||0,o=t[3*n+2]||0,s=3*n+1<t.length,a=3*n+2<t.length;e[n]=[l(r>>2&63),l(r<<4&48|i>>4&15),s?l(i<<2&60|o>>6&3):"=",a?l(63&o):"="].join("")}),e.join("")},h=function(t){return t.split(",")[0]&&t.split(",")[0].indexOf("base64")>=0&&(t=t.split(",")[1]),t},d={ai:"application/postscript",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",asc:"text/plain",atom:"application/atom+xml",au:"audio/basic",avi:"video/x-msvideo",bcpio:"application/x-bcpio",bin:"application/octet-stream",bmp:"image/bmp",cdf:"application/x-netcdf",cgm:"image/cgm","class":"application/octet-stream",cpio:"application/x-cpio",cpt:"application/mac-compactpro",csh:"application/x-csh",css:"text/css",dcr:"application/x-director",dif:"video/x-dv",dir:"application/x-director",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",docm:"application/vnd.ms-word.document.macroEnabled.12",dotm:"application/vnd.ms-word.template.macroEnabled.12",dtd:"application/xml-dtd",dv:"video/x-dv",dvi:"application/x-dvi",dxr:"application/x-director",eps:"application/postscript",etx:"text/x-setext",exe:"application/octet-stream",ez:"application/andrew-inset",gif:"image/gif",gram:"application/srgs",grxml:"application/srgs+xml",gtar:"application/x-gtar",hdf:"application/x-hdf",hqx:"application/mac-binhex40",htm:"text/html",html:"text/html",ice:"x-conference/x-cooltalk",ico:"image/x-icon",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",jnlp:"application/x-java-jnlp-file",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/x-javascript",kar:"audio/midi",latex:"application/x-latex",lha:"application/octet-stream",lzh:"application/octet-stream",m3u:"audio/x-mpegurl",m4a:"audio/mp4a-latm",m4b:"audio/mp4a-latm",m4p:"audio/mp4a-latm",m4u:"video/vnd.mpegurl",m4v:"video/x-m4v",mac:"image/x-macpaint",man:"application/x-troff-man",mathml:"application/mathml+xml",me:"application/x-troff-me",mesh:"model/mesh",mid:"audio/midi",midi:"audio/midi",mif:"application/vnd.mif",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpga:"audio/mpeg",ms:"application/x-troff-ms",msh:"model/mesh",mxu:"video/vnd.mpegurl",nc:"application/x-netcdf",oda:"application/oda",ogg:"application/ogg",pbm:"image/x-portable-bitmap",pct:"image/pict",pdb:"chemical/x-pdb",pdf:"application/pdf",pgm:"image/x-portable-graymap",pgn:"application/x-chess-pgn",pic:"image/pict",pict:"image/pict",png:"image/png",pnm:"image/x-portable-anymap",pnt:"image/x-macpaint",pntg:"image/x-macpaint",ppm:"image/x-portable-pixmap",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",ppam:"application/vnd.ms-powerpoint.addin.macroEnabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",potm:"application/vnd.ms-powerpoint.template.macroEnabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",ps:"application/postscript",qt:"video/quicktime",qti:"image/x-quicktime",qtif:"image/x-quicktime",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",ras:"image/x-cmu-raster",rdf:"application/rdf+xml",rgb:"image/x-rgb",rm:"application/vnd.rn-realmedia",roff:"application/x-troff",rtf:"text/rtf",rtx:"text/richtext",sgm:"text/sgml",sgml:"text/sgml",sh:"application/x-sh",shar:"application/x-shar",silo:"model/mesh",sit:"application/x-stuffit",skd:"application/x-koan",skm:"application/x-koan",skp:"application/x-koan",skt:"application/x-koan",smi:"application/smil",smil:"application/smil",snd:"audio/basic",so:"application/octet-stream",spl:"application/x-futuresplash",src:"application/x-wais-source",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",svg:"image/svg+xml",swf:"application/x-shockwave-flash",t:"application/x-troff",tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",texi:"application/x-texinfo",texinfo:"application/x-texinfo",tif:"image/tiff",tiff:"image/tiff",tr:"application/x-troff",tsv:"text/tab-separated-values",txt:"text/plain",ustar:"application/x-ustar",vcd:"application/x-cdlink",vrml:"model/vrml",vxml:"application/voicexml+xml",wav:"audio/x-wav",wbmp:"image/vnd.wap.wbmp",wbmxl:"application/vnd.wap.wbxml",wml:"text/vnd.wap.wml",wmlc:"application/vnd.wap.wmlc",wmls:"text/vnd.wap.wmlscript",wmlsc:"application/vnd.wap.wmlscriptc",wrl:"model/vrml",xbm:"image/x-xbitmap",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xml:"application/xml",xpm:"image/x-xpixmap",xsl:"application/xml",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.12",xltm:"application/vnd.ms-excel.template.macroEnabled.12",xlam:"application/vnd.ms-excel.addin.macroEnabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",xslt:"application/xslt+xml",xul:"application/vnd.mozilla.xul+xml",xwd:"image/x-xwindowdump",xyz:"chemical/x-xyz",zip:"application/zip"};t.File=function(i,o,s){this.attributes={name:i,url:"",metaData:{},base64:""};var a=void 0;if(o&&o.owner)a=o.owner;else if(!t._config.disableCurrentUser)try{a=t.User.current()}catch(u){if("SYNC_API_NOT_AVAILABLE"!==u.code)throw u;console.warn("Get current user failed. It seems this runtime use an async storage system, please create AV.File in the callback of AV.User.currentAsync().")}this.attributes.metaData={owner:a?a.id:"unknown"};var c=/\.([^.]*)$/.exec(i);c&&(c=c[1].toLowerCase());var l=s||d[c]||"text/plain";if(this._guessedType=l,r.isArray(o)&&(this.attributes.metaData.size=o.length,o={base64:f(o)}),o&&o.base64){var p=n(131),_=p(o.base64,l);this.attributes.base64=h(o.base64),this._source=t.Promise.as(_,l)}else if(o&&o.blob)o.blob.type||(o.blob.type=l),this._source=t.Promise.as(o.blob,l);else if("undefined"!=typeof File&&o instanceof e.File)this._source=t.Promise.as(o,l);else if("undefined"!=typeof e.Buffer&&e.Buffer.isBuffer(o))this.attributes.metaData.size=o.length,this._source=t.Promise.as(o,l);else if(r.isString(o))throw new Error("Creating a AV.File from a String is not yet supported.")},t.File.withURL=function(e,n,r,i){if(!e||!n)throw"Please provide file name and url";var o=new t.File(e,null,i);if(r)for(var s in r)o.attributes.metaData[s]||(o.attributes.metaData[s]=r[s]);return o.attributes.url=n,o.attributes.metaData.__source="external",o},t.File.createWithoutData=function(e){var n=new t.File;return n.id=e,n},t.File.prototype={className:"_File",toJSON:function(){return t._encode(this)},getACL:function(){return this._acl},setACL:function(e){return e instanceof t.ACL?void(this._acl=e):new a(a.OTHER_CAUSE,"ACL must be a AV.ACL.")},name:function(){return this.get("name")},url:function(){return this.get("url")},get:function(t){switch(t){case"objectId":case"id":return this.id;case"url":case"name":case"metaData":case"createdAt":case"updatedAt":return this.attributes[t];default:return this.attributes.metaData[t]}},set:function p(){var t=this,p=function(e,n){switch(e){case"name":case"url":case"base64":case"metaData":t.attributes[e]=n;break;default:t.attributes.metaData[e]=n}};switch(arguments.length){case 1:for(var e in arguments.length<=0?void 0:arguments[0])p(e,(arguments.length<=0?void 0:arguments[0])[e]);break;case 2:p(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}},metaData:function(t,e){return t&&e?(this.attributes.metaData[t]=e,this):t&&!e?this.attributes.metaData[t]:this.attributes.metaData},thumbnailURL:function(t,e,n,r,i){var o=this.attributes.url;if(!o)throw new Error("Invalid url.");if(!t||!e||t<=0||e<=0)throw new Error("Invalid width or height value.");if(n=n||100,r=!r||r,n<=0||n>100)throw new Error("Invalid quality value.");i=i||"png";var s=r?2:1;return o+"?imageView/"+s+"/w/"+t+"/h/"+e+"/q/"+n+"/format/"+i},size:function(){return this.metaData().size},ownerId:function(){return this.metaData().owner},destroy:function(e){if(!this.id)return t.Promise.error("The file id is not eixsts.")._thenRunCallbacks(e);var n=u("files",null,this.id,"DELETE",e&&e.sessionToken);return n._thenRunCallbacks(e)},_fileToken:function(t){var e=arguments.length<=1||void 0===arguments[1]?"fileTokens":arguments[1],n=this.attributes.name,r=c(n),i=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},o=i()+i()+i()+i()+i()+r,s={key:o,name:n,ACL:this._acl,mime_type:t,metaData:this.attributes.metaData};return t&&!this.attributes.metaData.mime_type&&(this.attributes.metaData.mime_type=t),this._qiniu_key=o,u(e,null,null,"POST",s)},save:function(){var t=this;if(this.id)throw new Error("File already saved. If you want to manipulate a file, use AV.Query to get it.");var e=void 0,n={};switch(arguments.length){case 1:e=arguments.length<=0?void 0:arguments[0];break;case 2:n=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1]}if(!this._previousSave)if(this._source)this._previousSave=this._source.then(function(e,r){return t._fileToken(r).then(function(r){var a=void 0;switch(r.provider){case"s3":a=s(r,e,t,n);break;case"qcloud":a=i(r,e,t,n);break;case"qiniu":default:a=o(r,e,t,n)}return a["catch"](function(e){throw t.destroy(),e})})});else if(this.attributes.url&&"external"===this.attributes.metaData.__source){var r={name:this.attributes.name,ACL:this._acl,metaData:this.attributes.metaData,mime_type:this._guessedType,url:this.attributes.url};this._previousSave=u("files",this.attributes.name,null,"post",r).then(function(e){return t.attributes.name=e.name,t.attributes.url=e.url,t.id=e.objectId,e.size&&(t.attributes.metaData.size=e.size),t})}return this._previousSave._thenRunCallbacks(e)},fetch:function(){var e=this,n=null,i={};1===arguments.length?n=arguments[0]:2===arguments.length&&(i=arguments[0],n=arguments[1]);var o=u("files",null,this.id,"GET",i);return o.then(function(n){var i=t.Object.prototype.parse(n);return i.attributes={name:i.name,url:i.url},i.attributes.metaData=i.metaData||{},delete i.objectId,delete i.metaData,delete i.url,delete i.name,r.extend(e,i),e})._thenRunCallbacks(n)}}}}).call(e,n(16))},function(t,e,n){"use strict";var r=n(0);t.exports=function(t){t.GeoPoint=function(e,n){r.isArray(e)?(t.GeoPoint._validate(e[0],e[1]),this.latitude=e[0],this.longitude=e[1]):r.isObject(e)?(t.GeoPoint._validate(e.latitude,e.longitude),this.latitude=e.latitude,this.longitude=e.longitude):r.isNumber(e)&&r.isNumber(n)?(t.GeoPoint._validate(e,n),this.latitude=e,this.longitude=n):(this.latitude=0,this.longitude=0);var i=this;this.__defineGetter__&&this.__defineSetter__&&(this._latitude=this.latitude,this._longitude=this.longitude,this.__defineGetter__("latitude",function(){return i._latitude}),this.__defineGetter__("longitude",function(){return i._longitude}),this.__defineSetter__("latitude",function(e){t.GeoPoint._validate(e,i.longitude),i._latitude=e}),this.__defineSetter__("longitude",function(e){t.GeoPoint._validate(i.latitude,e),i._longitude=e}))},t.GeoPoint._validate=function(t,e){if(t<-90)throw"AV.GeoPoint latitude "+t+" < -90.0.";if(t>90)throw"AV.GeoPoint latitude "+t+" > 90.0.";if(e<-180)throw"AV.GeoPoint longitude "+e+" < -180.0.";if(e>180)throw"AV.GeoPoint longitude "+e+" > 180.0."},t.GeoPoint.current=function(e){var n=new t.Promise;return navigator.geolocation.getCurrentPosition(function(e){n.resolve(new t.GeoPoint({latitude:e.coords.latitude,longitude:e.coords.longitude}))},function(t){n.reject(t)}),n._thenRunCallbacks(e)},t.GeoPoint.prototype={toJSON:function(){return t.GeoPoint._validate(this.latitude,this.longitude),{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(t){var e=Math.PI/180,n=this.latitude*e,r=this.longitude*e,i=t.latitude*e,o=t.longitude*e,s=n-i,a=r-o,u=Math.sin(s/2),c=Math.sin(a/2),l=u*u+Math.cos(n)*Math.cos(i)*c*c;return l=Math.min(1,l),2*Math.asin(Math.sqrt(l))},kilometersTo:function(t){return 6371*this.radiansTo(t)},milesTo:function(t){return 3958.8*this.radiansTo(t)}}}},function(t,e,n){"use strict";/*!
 * LeanCloud JavaScript SDK
 * https://leancloud.cn
 *
 * Copyright 2016 LeanCloud.cn, Inc.
 * The LeanCloud JavaScript SDK is freely distributable under the MIT license.
 */
var r=t.exports=n(41);r._=n(0),r.version=n(150),r.Promise=n(8),r.localStorage=n(59),r.Cache=n(58),r._config=r._config||{},n(60).init(r),n(133)(r),n(135)(r),n(129)(r),n(139)(r),n(142)(r),n(134)(r),n(138)(r),n(143)(r),n(149)(r),n(141)(r),n(132)(r),n(140)(r),n(145)(r),n(144)(r),n(137)(r);var i=n(5);r.Error=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.warn("AV.Error() is deprecated, and will be removed in next release."),new(Function.prototype.bind.apply(i,[null].concat(e)))}},function(t,e,n){"use strict";var r=n(0),i=n(5),o=n(4).request;t.exports=function(t){t.Insight=t.Insight||{},r.extend(t.Insight,{startJob:function(e,n){if(!e||!e.sql)throw new Error("Please provide the sql to run the job.");var r={jobConfig:e,appId:t.applicationId},i=o("bigquery","jobs",null,"POST",t._encode(r,null,!0));return i.then(function(e){return t._decode(null,e).id})._thenRunCallbacks(n)},on:function(t,e){}}),t.Insight.JobQuery=function(t,e){if(!t)throw new Error("Please provide the job id.");this.id=t,this.className=e,this._skip=0,this._limit=100},t.Insight.JobQuery.prototype={skip:function(t){return this._skip=t,this},limit:function(t){return this._limit=t,this},find:function(e){var n={skip:this._skip,limit:this._limit},r=o("bigquery","jobs",this.id,"GET",n);return r.then(function(e){return e.error?t.Promise.error(new i(e.code,e.error)):t.Promise.as(e)})._thenRunCallbacks(e)}}}},function(t,e,n){"use strict";var r=n(0),i=n(5),o=n(4).request,s=n(60);t.exports=function(t){t.Object=function(e,n){if(r.isString(e))return t.Object._create.apply(this,arguments);e=e||{},n&&n.parse&&(e=this.parse(e));var i=t._getValue(this,"defaults");if(i&&(e=r.extend({},i,e)),n&&n.collection&&(this.collection=n.collection),this._serverData={},this._opSetQueue=[{}],this.attributes={},this._hashedJSON={},this._escapedAttributes={},this.cid=r.uniqueId("c"),this.changed={},this._silent={},this._pending={},!this.set(e,{silent:!0}))throw new Error("Can't create an invalid AV.Object");this.changed={},this._silent={},this._pending={},this._hasData=!0,this._previousAttributes=r.clone(this.attributes),this.initialize.apply(this,arguments)},t.Object.saveAll=function(e,n){return t.Object._deepSaveAsync(e,null,n)._thenRunCallbacks(n)},t.Object.fetchAll=function(e,n){return t.Promise.as().then(function(){return o("batch",null,null,"POST",{requests:r.map(e,function(t){if(!t.className)throw new Error("object must have className to fetch");if(!t.id)throw new Error("object must have id to fetch");if(t.dirty())throw new Error("object is modified but not saved");return{method:"GET",path:"/1.1/classes/"+t.className+"/"+t.id}})},n&&n.sessionToken)}).then(function(t){return r.forEach(e,function(e,n){if(!t[n].success){var r=new Error(t[n].error.error);throw r.code=t[n].error.code,r}e._finishFetch(e.parse(t[n].success))}),e})},r.extend(t.Object.prototype,t.Events,{_fetchWhenSave:!1,initialize:function(){},fetchWhenSave:function(t){if(console.warn("AV.Object#fetchWhenSave is deprecated, use AV.Object#save with options.fetchWhenSave instead."),!r.isBoolean(t))throw"Expect boolean value for fetchWhenSave";this._fetchWhenSave=t},getObjectId:function(){return this.id},getCreatedAt:function(){return this.createdAt||this.get("createdAt")},getUpdatedAt:function(){return this.updatedAt||this.get("updatedAt")},toJSON:function(){var e=this._toFullJSON();return t._arrayEach(["__type","className"],function(t){delete e[t]}),e},_toFullJSON:function(e){var n=r.clone(this.attributes);return t._objectEach(n,function(r,i){n[i]=t._encode(r,e)}),t._objectEach(this._operations,function(t,e){n[e]=t}),r.has(this,"id")&&(n.objectId=this.id),r.has(this,"createdAt")&&(r.isDate(this.createdAt)?n.createdAt=this.createdAt.toJSON():n.createdAt=this.createdAt),r.has(this,"updatedAt")&&(r.isDate(this.updatedAt)?n.updatedAt=this.updatedAt.toJSON():n.updatedAt=this.updatedAt),n.__type="Object",n.className=this.className,n},_refreshCache:function(){var e=this;e._refreshingCache||(e._refreshingCache=!0,t._objectEach(this.attributes,function(n,i){n instanceof t.Object?n._refreshCache():r.isObject(n)&&e._resetCacheForKey(i)&&e.set(i,new t.Op.Set(n),{silent:!0})}),delete e._refreshingCache)},dirty:function(t){this._refreshCache();var e=r.last(this._opSetQueue);return t?!!e[t]:!this.id||r.keys(e).length>0},_toPointer:function(){return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(t){switch(t){case"objectId":case"id":return this.id;case"createdAt":case"updatedAt":return this[t];default:return this.attributes[t]}},relation:function(e){var n=this.get(e);if(n){if(!(n instanceof t.Relation))throw"Called relation() on non-relation field "+e;return n._ensureParentAndKey(this,e),n}return new t.Relation(this,e)},escape:function(t){var e=this._escapedAttributes[t];if(e)return e;var n,i=this.attributes[t];return n=s.isNullOrUndefined(i)?"":r.escape(i.toString()),this._escapedAttributes[t]=n,n},has:function(t){return!s.isNullOrUndefined(this.attributes[t])},_mergeMagicFields:function(e){var n=this,i=["id","objectId","createdAt","updatedAt"];t._arrayEach(i,function(i){e[i]&&("objectId"===i?n.id=e[i]:"createdAt"!==i&&"updatedAt"!==i||r.isDate(e[i])?n[i]=e[i]:n[i]=t._parseDate(e[i]),delete e[i])})},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var e=r.first(this._opSetQueue);this._opSetQueue=r.rest(this._opSetQueue);var n=r.first(this._opSetQueue);t._objectEach(e,function(t,r){var i=e[r],o=n[r];i&&o?n[r]=o._mergeWithPrevious(i):i&&(n[r]=i)}),this._saving=this._saving-1},_finishSave:function(e){var n={};t._traverse(this.attributes,function(e){e instanceof t.Object&&e.id&&e._hasData&&(n[e.id]=e)});var i=r.first(this._opSetQueue);this._opSetQueue=r.rest(this._opSetQueue),this._applyOpSet(i,this._serverData),this._mergeMagicFields(e);var o=this;t._objectEach(e,function(e,r){o._serverData[r]=t._decode(r,e);var i=t._traverse(o._serverData[r],function(e){if(e instanceof t.Object&&n[e.id])return n[e.id]});i&&(o._serverData[r]=i)}),this._rebuildAllEstimatedData(),this._saving=this._saving-1},_finishFetch:function(e,n){this._opSetQueue=[{}],this._mergeMagicFields(e);var r=this;t._objectEach(e,function(e,n){r._serverData[n]=t._decode(n,e)}),this._rebuildAllEstimatedData(),this._refreshCache(),this._opSetQueue=[{}],this._hasData=n},_applyOpSet:function(e,n){var r=this;t._objectEach(e,function(e,i){n[i]=e._estimate(n[i],r,i),n[i]===t.Op._UNSET&&delete n[i]})},_resetCacheForKey:function(e){var n=this.attributes[e];if(r.isObject(n)&&!(n instanceof t.Object)&&!(n instanceof t.File)){n=n.toJSON?n.toJSON():n;var i=JSON.stringify(n);if(this._hashedJSON[e]!==i){var o=!!this._hashedJSON[e];return this._hashedJSON[e]=i,o}}return!1},_rebuildEstimatedDataForKey:function(e){var n=this;delete this.attributes[e],this._serverData[e]&&(this.attributes[e]=this._serverData[e]),t._arrayEach(this._opSetQueue,function(r){var i=r[e];i&&(n.attributes[e]=i._estimate(n.attributes[e],n,e),n.attributes[e]===t.Op._UNSET?delete n.attributes[e]:n._resetCacheForKey(e))})},_rebuildAllEstimatedData:function(){var e=this,n=r.clone(this.attributes);this.attributes=r.clone(this._serverData),t._arrayEach(this._opSetQueue,function(n){e._applyOpSet(n,e.attributes),t._objectEach(n,function(t,n){e._resetCacheForKey(n)})}),t._objectEach(n,function(t,n){e.attributes[n]!==t&&e.trigger("change:"+n,e,e.attributes[n],{})}),t._objectEach(this.attributes,function(t,i){r.has(n,i)||e.trigger("change:"+i,e,t,{})})},set:function(e,n,i){var o;if(r.isObject(e)||s.isNullOrUndefined(e)?(o=e,t._objectEach(o,function(e,n){o[n]=t._decode(n,e)}),i=n):(o={},o[e]=t._decode(e,n)),i=i||{},!o)return this;o instanceof t.Object&&(o=o.attributes),i.unset&&t._objectEach(o,function(e,n){o[n]=new t.Op.Unset});var a=r.clone(o),u=this;if(t._objectEach(a,function(e,n){e instanceof t.Op&&(a[n]=e._estimate(u.attributes[n],u,n),a[n]===t.Op._UNSET&&delete a[n])}),!this._validate(o,i))return!1;this._mergeMagicFields(o),i.changes={};var c=this._escapedAttributes;this._previousAttributes||{};return t._arrayEach(r.keys(o),function(e){var n=o[e];n instanceof t.Relation&&(n.parent=u),n instanceof t.Op||(n=new t.Op.Set(n));var s=!0;n instanceof t.Op.Set&&r.isEqual(u.attributes[e],n.value)&&(s=!1),s&&(delete c[e],i.silent?u._silent[e]=!0:i.changes[e]=!0);var a=r.last(u._opSetQueue);a[e]=n._mergeWithPrevious(a[e]),u._rebuildEstimatedDataForKey(e),s?(u.changed[e]=u.attributes[e],i.silent||(u._pending[e]=!0)):(delete u.changed[e],delete u._pending[e])}),i.silent||this.change(i),this},unset:function(t,e){return e=e||{},e.unset=!0,this.set(t,null,e)},increment:function(e,n){return(r.isUndefined(n)||r.isNull(n))&&(n=1),this.set(e,new t.Op.Increment(n))},add:function(e,n){return this.set(e,new t.Op.Add(s.ensureArray(n)))},addUnique:function(e,n){return this.set(e,new t.Op.AddUnique(s.ensureArray(n)))},remove:function(e,n){return this.set(e,new t.Op.Remove(s.ensureArray(n)))},op:function(t){return r.last(this._opSetQueue)[t]},clear:function(t){t=t||{},t.unset=!0;var e=r.extend(this.attributes,this._operations);return this.set(e,t)},_getSaveJSON:function(){var e=r.clone(r.first(this._opSetQueue));return t._objectEach(e,function(t,n){e[n]=t.toJSON()}),e},_canBeSerialized:function(){return t.Object._canBeSerializedAsValue(this.attributes)},fetch:function(){var t={},e={};1===arguments.length?t=arguments[0]:2===arguments.length&&(e=arguments[0],t=arguments[1]||{}),e&&e.include&&r.isArray(e.include)&&(e.include=e.include.join(","));var n=this,i=o("classes",this.className,this.id,"GET",e,t.sessionToken);return i.then(function(t){return n._finishFetch(n.parse(t),!0),n})._thenRunCallbacks(t,this)},save:function(e,n,i){var a,u,c;if(r.isObject(e)||s.isNullOrUndefined(e)?(a=e,c=n):(a={},a[e]=n,c=i),!c&&a){var l=r.reject(a,function(t,e){return r.include(["success","error","wait"],e)});if(0===l.length){var f=!0;if(r.has(a,"success")&&!r.isFunction(a.success)&&(f=!1),r.has(a,"error")&&!r.isFunction(a.error)&&(f=!1),f)return this.save(null,a)}}c=r.clone(c)||{},c.wait&&(u=r.clone(this.attributes));var h=r.clone(c)||{};h.wait&&(h.silent=!0);var d;if(h.error=function(t,e){d=e},a&&!this.set(a,h))return t.Promise.error(d)._thenRunCallbacks(c,this);var p=this;p._refreshCache();var _=[],v=[];return t.Object._findUnsavedChildren(p.attributes,_,v),_.length+v.length>0?t.Object._deepSaveAsync(this.attributes,p,c).then(function(){return p.save(null,c)},function(e){return t.Promise.error(e)._thenRunCallbacks(c,p)}):(this._startSave(),this._saving=(this._saving||0)+1,this._allPreviousSaves=this._allPreviousSaves||t.Promise.as(),this._allPreviousSaves=this._allPreviousSaves._continueWith(function(){var e=p.id?"PUT":"POST",n=p._getSaveJSON();if(p._fetchWhenSave&&(n._fetchWhenSave=!0),c.fetchWhenSave&&(n._fetchWhenSave=!0),c.query){var i;if("function"==typeof c.query.toJSON&&(i=c.query.toJSON(),i&&(n._where=i.where)),!n._where){var s=new Error("options.query is not an AV.Query");return t.Promise.error(s)._thenRunCallbacks(c,p)}}var l="classes",f=p.className;"_User"!==p.className||p.id||(l="users",f=null);var d=c._makeRequest||o,_=d(l,f,p.id,e,n,c.sessionToken);return _=_.then(function(t){var e=p.parse(t);return c.wait&&(e=r.extend(a||{},e)),p._finishSave(e),c.wait&&p.set(u,h),p},function(e){return p._cancelSave(),t.Promise.error(e)})._thenRunCallbacks(c,p)}),this._allPreviousSaves)},destroy:function(t){t=t||{};var e=this,n=function(){e.trigger("destroy",e,e.collection,t)};if(!this.id)return n();t.wait||n();var r=o("classes",this.className,this.id,"DELETE",null,t.sessionToken);return r.then(function(){return t.wait&&n(),e})._thenRunCallbacks(t,this)},parse:function(e){var n=r.clone(e);return r(["createdAt","updatedAt"]).each(function(e){n[e]&&(n[e]=t._parseDate(n[e]))}),n.updatedAt||(n.updatedAt=n.createdAt),n},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.id},change:function(e){e=e||{};var n=this._changing;this._changing=!0;var i=this;t._objectEach(this._silent,function(t){i._pending[t]=!0});var o=r.extend({},e.changes,this._silent);if(this._silent={},t._objectEach(o,function(t,n){i.trigger("change:"+n,i,i.get(n),e)}),n)return this;for(var s=function(t,e){i._pending[e]||i._silent[e]||delete i.changed[e]};!r.isEmpty(this._pending);)this._pending={},this.trigger("change",this,e),t._objectEach(this.changed,s),i._previousAttributes=r.clone(this.attributes);return this._changing=!1,this},existed:function(){return console.warn("AV.Object.prototype.existed() is deprecated."),!1},hasChanged:function(t){return arguments.length?this.changed&&r.has(this.changed,t):!r.isEmpty(this.changed)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&r.clone(this.changed);var n={},i=this._previousAttributes;return t._objectEach(e,function(t,e){r.isEqual(i[e],t)||(n[e]=t)}),n},previous:function(t){return arguments.length&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return r.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},validate:function(e,n){return!(!r.has(e,"ACL")||e.ACL instanceof t.ACL)&&new i(i.OTHER_CAUSE,"ACL must be a AV.ACL.")},_validate:function(t,e){if(e.silent||!this.validate)return!0;t=r.extend({},this.attributes,t);var n=this.validate(t,e);return!n||(e&&e.error?e.error(this,n,e):this.trigger("error",this,n,e),!1)},getACL:function(){return this.get("ACL")},setACL:function(t,e){return this.set("ACL",t,e)}}),t.Object.createWithoutData=function(e,n,r){var i=new t.Object(e);return i.id=n,i._hasData=r,i},t.Object.destroyAll=function(e,n){if(n=n||{},!e||0===e.length)return t.Promise.as()._thenRunCallbacks(n);var r=e[0].className,i="",s=!0;e.forEach(function(t){if(t.className!=r)throw"AV.Object.destroyAll requires the argument object array's classNames must be the same";if(!t.id)throw"Could not delete unsaved object";s?(i=t.id,s=!1):i=i+","+t.id});var a=o("classes",r,i,"DELETE",null,n.sessionToken);return a._thenRunCallbacks(n)},t.Object._getSubclass=function(e){if(!r.isString(e))throw"AV.Object._getSubclass requires a string argument.";var n=t.Object._classMap[e];return n||(n=t.Object.extend(e),t.Object._classMap[e]=n),n},t.Object._create=function(e,n,r){var i=t.Object._getSubclass(e);return new i(n,r)},t.Object._classMap={},t.Object._extend=t._extend,t.Object["new"]=function(e,n){return new t.Object(e,n)},t.Object.extend=function(e,n,i){if(!r.isString(e)){if(e&&r.has(e,"className"))return t.Object.extend(e.className,e,n);throw new Error("AV.Object.extend's first argument should be the className.")}"User"===e&&(e="_User");var o=null;if(r.has(t.Object._classMap,e)){var s=t.Object._classMap[e];if(!n&&!i)return s;o=s._extend(n,i)}else n=n||{},n._className=e,o=this._extend(n,i);return o.extend=function(n){if(r.isString(n)||n&&r.has(n,"className"))return t.Object.extend.apply(o,arguments);var i=[e].concat(r.toArray(arguments));return t.Object.extend.apply(o,i)},o["new"]=function(t,e){return new o(t,e)},t.Object._classMap[e]=o,o},Object.defineProperty(t.Object.prototype,"className",{get:function(){var t=this._className||this.constructor.name;return"User"===t?"_User":t}}),t.Object.register=function(e){if(!(e.prototype instanceof t.Object))throw new Error("registered class is not a subclass of AV.Object");var n=e.name;if(!n.length)throw new Error("registered class must be named");t.Object._classMap[n]=e},t.Object._findUnsavedChildren=function(e,n,r){t._traverse(e,function(e){return e instanceof t.Object?(e._refreshCache(),void(e.dirty()&&n.push(e))):e instanceof t.File?void(e.url()||e.id||r.push(e)):void 0})},t.Object._canBeSerializedAsValue=function(e){var n=!0;return e instanceof t.Object||e instanceof t.File?n=!!e.id:r.isArray(e)?t._arrayEach(e,function(e){t.Object._canBeSerializedAsValue(e)||(n=!1)}):r.isObject(e)&&t._objectEach(e,function(e){t.Object._canBeSerializedAsValue(e)||(n=!1)}),n},t.Object._deepSaveAsync=function(e,n,s){var a=[],u=[];t.Object._findUnsavedChildren(e,a,u),n&&(a=r.filter(a,function(t){return t!=n}));var c=t.Promise.as();r.each(u,function(t){c=c.then(function(){return t.save()})});var l=r.uniq(a),f=r.uniq(l);return c.then(function(){return t.Promise._continueWhile(function(){return f.length>0},function(){var e=[],n=[];if(t._arrayEach(f,function(t){return e.length>20?void n.push(t):void(t._canBeSerialized()?e.push(t):n.push(t))}),f=n,0===e.length)return t.Promise.error(new i(i.OTHER_CAUSE,"Tried to save a batch with a cycle."));var a=t.Promise.when(r.map(e,function(e){return e._allPreviousSaves||t.Promise.as()})),u=new t.Promise;return t._arrayEach(e,function(t){t._allPreviousSaves=u}),a._continueWith(function(){return o("batch",null,null,"POST",{requests:r.map(e,function(t){var e=t._getSaveJSON(),n="POST",r="/1.1/classes/"+t.className;return t.id&&(r=r+"/"+t.id,n="PUT"),t._startSave(),{method:n,path:r,body:e}})},s&&s.sessionToken).then(function(n){var r;if(t._arrayEach(e,function(t,e){n[e].success?t._finishSave(t.parse(n[e].success)):(r=r||n[e].error,t._cancelSave())}),r)return t.Promise.error(new i(r.code,r.error))}).then(function(t){return u.resolve(t),t},function(e){return u.reject(e),t.Promise.error(e)})})})}).then(function(){return e})}}},function(t,e,n){"use strict";var r=n(0);t.exports=function(t){t.Op=function(){this._initialize.apply(this,arguments)},t.Op.prototype={_initialize:function(){}},r.extend(t.Op,{_extend:t._extend,_opDecoderMap:{},_registerDecoder:function(e,n){t.Op._opDecoderMap[e]=n},_decode:function(e){var n=t.Op._opDecoderMap[e.__op];return n?n(e):void 0}}),t.Op._registerDecoder("Batch",function(e){var n=null;return t._arrayEach(e.ops,function(e){e=t.Op._decode(e),n=e._mergeWithPrevious(n)}),n}),t.Op.Set=t.Op._extend({_initialize:function(t){this._value=t},value:function(){return this._value},toJSON:function(){return t._encode(this.value())},_mergeWithPrevious:function(t){return this},_estimate:function(t){return this.value()}}),t.Op._UNSET={},t.Op.Unset=t.Op._extend({toJSON:function(){return{__op:"Delete"}},_mergeWithPrevious:function(t){return this},_estimate:function(e){return t.Op._UNSET}}),t.Op._registerDecoder("Delete",function(e){return new t.Op.Unset}),t.Op.Increment=t.Op._extend({_initialize:function(t){this._amount=t},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(e){if(e){if(e instanceof t.Op.Unset)return new t.Op.Set(this.amount());if(e instanceof t.Op.Set)return new t.Op.Set(e.value()+this.amount());if(e instanceof t.Op.Increment)return new t.Op.Increment(this.amount()+e.amount());throw"Op is invalid after previous op."}return this},_estimate:function(t){return t?t+this.amount():this.amount()}}),t.Op._registerDecoder("Increment",function(e){return new t.Op.Increment(e.amount)}),t.Op.Add=t.Op._extend({_initialize:function(t){this._objects=t},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:t._encode(this.objects())}},_mergeWithPrevious:function(e){if(e){if(e instanceof t.Op.Unset)return new t.Op.Set(this.objects());if(e instanceof t.Op.Set)return new t.Op.Set(this._estimate(e.value()));if(e instanceof t.Op.Add)return new t.Op.Add(e.objects().concat(this.objects()));throw"Op is invalid after previous op."}return this},_estimate:function(t){return t?t.concat(this.objects()):r.clone(this.objects())}}),t.Op._registerDecoder("Add",function(e){return new t.Op.Add(t._decode(void 0,e.objects))}),t.Op.AddUnique=t.Op._extend({_initialize:function(t){this._objects=r.uniq(t)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:t._encode(this.objects())}},_mergeWithPrevious:function(e){if(e){if(e instanceof t.Op.Unset)return new t.Op.Set(this.objects());if(e instanceof t.Op.Set)return new t.Op.Set(this._estimate(e.value()));if(e instanceof t.Op.AddUnique)return new t.Op.AddUnique(this._estimate(e.objects()));throw"Op is invalid after previous op."}return this},_estimate:function(e){if(e){var n=r.clone(e);return t._arrayEach(this.objects(),function(e){if(e instanceof t.Object&&e.id){var i=r.find(n,function(n){return n instanceof t.Object&&n.id===e.id});if(i){var o=r.indexOf(n,i);n[o]=e}else n.push(e)}else r.contains(n,e)||n.push(e)}),n}return r.clone(this.objects())}}),t.Op._registerDecoder("AddUnique",function(e){return new t.Op.AddUnique(t._decode(void 0,e.objects))}),t.Op.Remove=t.Op._extend({_initialize:function(t){this._objects=r.uniq(t)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:t._encode(this.objects())}},_mergeWithPrevious:function(e){if(e){if(e instanceof t.Op.Unset)return e;if(e instanceof t.Op.Set)return new t.Op.Set(this._estimate(e.value()));if(e instanceof t.Op.Remove)return new t.Op.Remove(r.union(e.objects(),this.objects()));throw"Op is invalid after previous op."}return this},_estimate:function(e){if(e){var n=r.difference(e,this.objects());return t._arrayEach(this.objects(),function(e){e instanceof t.Object&&e.id&&(n=r.reject(n,function(n){return n instanceof t.Object&&n.id===e.id}))}),n}return[]}}),t.Op._registerDecoder("Remove",function(e){return new t.Op.Remove(t._decode(void 0,e.objects))}),t.Op.Relation=t.Op._extend({_initialize:function(e,n){this._targetClassName=null;var i=this,o=function(e){if(e instanceof t.Object){if(!e.id)throw"You can't add an unsaved AV.Object to a relation.";if(i._targetClassName||(i._targetClassName=e.className),i._targetClassName!==e.className)throw"Tried to create a AV.Relation with 2 different types: "+i._targetClassName+" and "+e.className+".";return e.id}return e};this.relationsToAdd=r.uniq(r.map(e,o)),this.relationsToRemove=r.uniq(r.map(n,o))},added:function(){var e=this;return r.map(this.relationsToAdd,function(n){var r=t.Object._create(e._targetClassName);return r.id=n,r})},removed:function(){var e=this;return r.map(this.relationsToRemove,function(n){var r=t.Object._create(e._targetClassName);return r.id=n,r})},toJSON:function(){var t=null,e=null,n=this,i=function(t){return{__type:"Pointer",className:n._targetClassName,objectId:t}},o=null;return this.relationsToAdd.length>0&&(o=r.map(this.relationsToAdd,i),t={__op:"AddRelation",objects:o}),this.relationsToRemove.length>0&&(o=r.map(this.relationsToRemove,i),e={__op:"RemoveRelation",objects:o}),t&&e?{__op:"Batch",ops:[t,e]}:t||e||{}},_mergeWithPrevious:function(e){if(e){if(e instanceof t.Op.Unset)throw"You can't modify a relation after deleting it.";if(e instanceof t.Op.Relation){if(e._targetClassName&&e._targetClassName!==this._targetClassName)throw"Related object must be of class "+e._targetClassName+", but "+this._targetClassName+" was passed in.";var n=r.union(r.difference(e.relationsToAdd,this.relationsToRemove),this.relationsToAdd),i=r.union(r.difference(e.relationsToRemove,this.relationsToAdd),this.relationsToRemove),o=new t.Op.Relation(n,i);return o._targetClassName=this._targetClassName,o}throw"Op is invalid after previous op."}return this},_estimate:function(e,n,r){if(e){if(e instanceof t.Relation){if(this._targetClassName)if(e.targetClassName){if(e.targetClassName!==this._targetClassName)throw"Related object must be a "+e.targetClassName+", but a "+this._targetClassName+" was passed in."}else e.targetClassName=this._targetClassName;return e}throw"Op is invalid after previous op."}var i=new t.Relation(n,r);i.targetClassName=this._targetClassName}}),t.Op._registerDecoder("AddRelation",function(e){return new t.Op.Relation(t._decode(void 0,e.objects),[])}),t.Op._registerDecoder("RemoveRelation",function(e){return new t.Op.Relation([],t._decode(void 0,e.objects))})}},function(t,e,n){"use strict";var r=n(4).request;t.exports=function(t){t.Installation=t.Object.extend("_Installation"),t.Push=t.Push||{},t.Push.send=function(t,e){if(t.where&&(t.where=t.where.toJSON().where),t.where&&t.cql)throw"Both where and cql can't be set";if(t.push_time&&(t.push_time=t.push_time.toJSON()),t.expiration_time&&(t.expiration_time=t.expiration_time.toJSON()),t.expiration_time&&t.expiration_time_interval)throw"Both expiration_time and expiration_time_interval can't be set";var n=r("push",null,null,"POST",t);return n._thenRunCallbacks(e)}}},function(t,e,n){"use strict";var r=n(0),i=n(5),o=n(4).request;t.exports=function(t){t.Query=function(e){r.isString(e)&&(e=t.Object._getSubclass(e)),this.objectClass=e,this.className=e.prototype.className,this._where={},this._include=[],this._limit=-1,this._skip=0,this._extraOptions={}},t.Query.or=function(){var e=r.toArray(arguments),n=null;t._arrayEach(e,function(t){if(r.isNull(n)&&(n=t.className),n!==t.className)throw"All queries must be for the same class"});var i=new t.Query(n);return i._orQuery(e),i},t.Query.and=function(){var e=r.toArray(arguments),n=null;t._arrayEach(e,function(t){if(r.isNull(n)&&(n=t.className),n!==t.className)throw"All queries must be for the same class"});var i=new t.Query(n);return i._andQuery(e),i},t.Query.doCloudQuery=function(e,n,i){var s={cql:e};r.isArray(n)?s.pvalues=n:i=n;var a=o("cloudQuery",null,null,"GET",s,i&&i.sessionToken);return a.then(function(e){var n=new t.Query(e.className),i=r.map(e.results,function(t){var r=n._newObject(e);return r._finishFetch&&r._finishFetch(n._processResult(t),!0),r});return{results:i,count:e.count,className:e.className}})._thenRunCallbacks(i)},t.Query._extend=t._extend,t.Query.prototype={_processResult:function(t){return t},get:function(e,n){if(!e){var o=new i(i.OBJECT_NOT_FOUND,"Object not found.");throw o}var s=this;return s.equalTo("objectId",e),s.first().then(function(e){if(!r.isEmpty(e))return e;var n=new i(i.OBJECT_NOT_FOUND,"Object not found.");return t.Promise.error(n)})._thenRunCallbacks(n,null)},toJSON:function(){var e={where:this._where};return this._include.length>0&&(e.include=this._include.join(",")),this._select&&(e.keys=this._select.join(",")),this._limit>=0&&(e.limit=this._limit),this._skip>0&&(e.skip=this._skip),void 0!==this._order&&(e.order=this._order),t._objectEach(this._extraOptions,function(t,n){e[n]=t}),e},_newObject:function(e){var n;return n=e&&e.className?new t.Object(e.className):new this.objectClass},_createRequest:function(t,e){return o("classes",this.className,null,"GET",t||this.toJSON(),e&&e.sessionToken)},find:function(t){var e=this,n=this._createRequest(null,t);return n.then(function(t){return r.map(t.results,function(n){var r=e._newObject(t);return r._finishFetch&&r._finishFetch(e._processResult(n),!0),r})})._thenRunCallbacks(t)},destroyAll:function(e){var n=this;return n.find().then(function(e){return t.Object.destroyAll(e)})._thenRunCallbacks(e)},count:function(t){var e=this.toJSON();e.limit=0,e.count=1;var n=this._createRequest(e,t);return n.then(function(t){return t.count})._thenRunCallbacks(t)},first:function(t){var e=this,n=this.toJSON();n.limit=1;var i=this._createRequest(n,t);return i.then(function(t){return r.map(t.results,function(t){var n=e._newObject();return n._finishFetch&&n._finishFetch(e._processResult(t),!0),n})[0]})._thenRunCallbacks(t)},collection:function(e,n){return n=n||{},new t.Collection(e,r.extend(n,{model:this._objectClass||this.objectClass,query:this}))},skip:function(t){return this._skip=t,this},limit:function(t){return this._limit=t,this},equalTo:function(e,n){return this._where[e]=t._encode(n),this},_addCondition:function(e,n,r){return this._where[e]||(this._where[e]={}),this._where[e][n]=t._encode(r),this},sizeEqualTo:function(t,e){this._addCondition(t,"$size",e)},notEqualTo:function(t,e){return this._addCondition(t,"$ne",e),this},lessThan:function(t,e){return this._addCondition(t,"$lt",e),this},greaterThan:function(t,e){return this._addCondition(t,"$gt",e),this},lessThanOrEqualTo:function(t,e){return this._addCondition(t,"$lte",e),this},greaterThanOrEqualTo:function(t,e){return this._addCondition(t,"$gte",e),this},containedIn:function(t,e){return this._addCondition(t,"$in",e),this},notContainedIn:function(t,e){return this._addCondition(t,"$nin",e),this},containsAll:function(t,e){return this._addCondition(t,"$all",e),this},exists:function(t){return this._addCondition(t,"$exists",!0),this},doesNotExist:function(t){return this._addCondition(t,"$exists",!1),this},matches:function(t,e,n){return this._addCondition(t,"$regex",e),n||(n=""),e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),n&&n.length&&this._addCondition(t,"$options",n),this},matchesQuery:function(t,e){var n=e.toJSON();return n.className=e.className,this._addCondition(t,"$inQuery",n),this},doesNotMatchQuery:function(t,e){var n=e.toJSON();return n.className=e.className,this._addCondition(t,"$notInQuery",n),this},matchesKeyInQuery:function(t,e,n){var r=n.toJSON();return r.className=n.className,this._addCondition(t,"$select",{key:e,query:r}),this},doesNotMatchKeyInQuery:function(t,e,n){var r=n.toJSON();return r.className=n.className,this._addCondition(t,"$dontSelect",{key:e,query:r}),this},_orQuery:function(t){var e=r.map(t,function(t){return t.toJSON().where});return this._where.$or=e,this},_andQuery:function(t){var e=r.map(t,function(t){return t.toJSON().where});return this._where.$and=e,this},_quote:function(t){return"\\Q"+t.replace("\\E","\\E\\\\E\\Q")+"\\E"},contains:function(t,e){return this._addCondition(t,"$regex",this._quote(e)),this},startsWith:function(t,e){return this._addCondition(t,"$regex","^"+this._quote(e)),this},endsWith:function(t,e){return this._addCondition(t,"$regex",this._quote(e)+"$"),this},ascending:function(t){return this._order=t,this},addAscending:function(t){return this._order?this._order+=","+t:this._order=t,this},descending:function(t){return this._order="-"+t,this},addDescending:function(t){return this._order?this._order+=",-"+t:this._order="-"+t,this},near:function(e,n){return n instanceof t.GeoPoint||(n=new t.GeoPoint(n)),this._addCondition(e,"$nearSphere",n),this},withinRadians:function(t,e,n){return this.near(t,e),this._addCondition(t,"$maxDistance",n),this},withinMiles:function(t,e,n){return this.withinRadians(t,e,n/3958.8)},withinKilometers:function(t,e,n){return this.withinRadians(t,e,n/6371)},withinGeoBox:function(e,n,r){return n instanceof t.GeoPoint||(n=new t.GeoPoint(n)),r instanceof t.GeoPoint||(r=new t.GeoPoint(r)),this._addCondition(e,"$within",{$box:[n,r]}),this},include:function(){var e=this;return t._arrayEach(arguments,function(t){r.isArray(t)?e._include=e._include.concat(t):e._include.push(t)}),this},select:function(){var e=this;return this._select=this._select||[],t._arrayEach(arguments,function(t){r.isArray(t)?e._select=e._select.concat(t):e._select.push(t)}),this},each:function(e,n){if(n=n||{},this._order||this._skip||this._limit>=0){var i="Cannot iterate on a query with sort, skip, or limit.";return t.Promise.error(i)._thenRunCallbacks(n)}var o=(new t.Promise,new t.Query(this.objectClass));o._limit=n.batchSize||100,o._where=r.clone(this._where),o._include=r.clone(this._include),o.ascending("objectId");var s=!1;return t.Promise._continueWhile(function(){return!s},function(){return o.find().then(function(n){var i=t.Promise.as();return r.each(n,function(t){i=i.then(function(){return e(t)})}),i.then(function(){n.length>=o._limit?o.greaterThan("objectId",n[n.length-1].id):s=!0})})})._thenRunCallbacks(n)}},t.FriendShipQuery=t.Query._extend({_objectClass:t.User,_newObject:function(){return new t.User},_processResult:function(t){if(t&&t[this._friendshipTag]){var e=t[this._friendshipTag];return"Pointer"===e.__type&&"_User"===e.className&&(delete e.__type,delete e.className),e}return null}})}},function(t,e,n){"use strict";var r=n(0);t.exports=function(t){t.Relation=function(t,e){if(!r.isString(e))throw new TypeError("key must be a string");this.parent=t,this.key=e,this.targetClassName=null},t.Relation.reverseQuery=function(e,n,r){var i=new t.Query(e);return i.equalTo(n,r._toPointer()),i},t.Relation.prototype={_ensureParentAndKey:function(t,e){if(this.parent=this.parent||t,this.key=this.key||e,this.parent!==t)throw"Internal Error. Relation retrieved from two different Objects.";if(this.key!==e)throw"Internal Error. Relation retrieved from two different keys."},add:function(e){r.isArray(e)||(e=[e]);var n=new t.Op.Relation(e,[]);
this.parent.set(this.key,n),this.targetClassName=n._targetClassName},remove:function(e){r.isArray(e)||(e=[e]);var n=new t.Op.Relation([],e);this.parent.set(this.key,n),this.targetClassName=n._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function e(){var n,e;return this.targetClassName?(n=t.Object._getSubclass(this.targetClassName),e=new t.Query(n)):(n=t.Object._getSubclass(this.parent.className),e=new t.Query(n),e._extraOptions.redirectClassNameForKey=this.key),e._addCondition("$relatedTo","object",this.parent._toPointer()),e._addCondition("$relatedTo","key",this.key),e}}}},function(t,e,n){"use strict";var r=n(0),i=n(5);t.exports=function(t){t.Role=t.Object.extend("_Role",{constructor:function(e,n){if(r.isString(e)?(t.Object.prototype.constructor.call(this,null,null),this.setName(e)):t.Object.prototype.constructor.call(this,e,n),void 0===n){var i=new t.ACL;i.setPublicReadAccess(!0),this.getACL()||this.setACL(i)}else{if(!(n instanceof t.ACL))throw new TypeError("acl must be an instance of AV.ACL");this.setACL(n)}},getName:function(){return this.get("name")},setName:function(t,e){return this.set("name",t,e)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(e,n){if("name"in e&&e.name!==this.getName()){var o=e.name;if(this.id&&this.id!==e.objectId)return new i(i.OTHER_CAUSE,"A role's name can only be set before it has been saved.");if(!r.isString(o))return new i(i.OTHER_CAUSE,"A role's name must be a String.");if(!/^[0-9a-zA-Z\-_ ]+$/.test(o))return new i(i.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}return!!t.Object.prototype.validate&&t.Object.prototype.validate.call(this,e,n)}})}},function(t,e,n){"use strict";var r=n(0),i=n(4).request;t.exports=function(t){t.SearchSortBuilder=function(){this._sortFields=[]},t.SearchSortBuilder.prototype={_addField:function(t,e,n,r){var i={};return i[t]={order:e||"asc",mode:n||"avg",missing:"_"+(r||"last")},this._sortFields.push(i),this},ascending:function(t,e,n){return this._addField(t,"asc",e,n)},descending:function(t,e,n){return this._addField(t,"desc",e,n)},whereNear:function(t,e,n){n=n||{};var r={},i={lat:e.latitude,lon:e.longitude},o={order:n.order||"asc",mode:n.mode||"avg",unit:n.unit||"km"};return o[t]=i,r._geo_distance=o,this._sortFields.push(r),this},build:function(){return JSON.stringify(t._encode(this._sortFields))}},t.SearchQuery=t.Query._extend({_sid:null,_hits:0,_queryString:null,_highlights:null,_sortBuilder:null,_createRequest:function(t,e){return i("search/select",null,null,"GET",t||this.toJSON(),e&&e.sessionToken)},sid:function(t){return this._sid=t,this},queryString:function(t){return this._queryString=t,this},highlights:function(t){var e;return e=t&&r.isString(t)?arguments:t,this._highlights=e,this},sortBy:function(t){return this._sortBuilder=t,this},hits:function(){return this._hits||(this._hits=0),this._hits},_processResult:function(t){return delete t.className,delete t._app_url,delete t._deeplink,t},hasMore:function(){return!this._hitEnd},reset:function(){this._hitEnd=!1,this._sid=null,this._hits=0},find:function(t){var e=this,n=this._createRequest();return n.then(function(t){return t.sid?(e._oldSid=e._sid,e._sid=t.sid):(e._sid=null,e._hitEnd=!0),e._hits=t.hits||0,r.map(t.results,function(n){n.className&&(t.className=n.className);var r=e._newObject(t);return r.appURL=n._app_url,r._finishFetch(e._processResult(n),!0),r})})._thenRunCallbacks(t)},toJSON:function(){var e=t.SearchQuery.__super__.toJSON.call(this);if(delete e.where,this.className&&(e.clazz=this.className),this._sid&&(e.sid=this._sid),!this._queryString)throw"Please set query string.";if(e.q=this._queryString,this._highlights&&(e.highlights=this._highlights.join(",")),this._sortBuilder&&e.order)throw"sort and order can not be set at same time.";return this._sortBuilder&&(e.sort=this._sortBuilder.build()),e}})}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=n(0),o=n(4).request;t.exports=function(t){t.Status=function(t,e){return this.data={},this.inboxType="default",this.query=null,t&&"object"===("undefined"==typeof t?"undefined":r(t))?this.data=t:(t&&(this.data.image=t),e&&(this.data.message=e)),this},t.Status.prototype={get:function(t){return this.data[t]},set:function(t,e){return this.data[t]=e,this},destroy:function(e){if(!this.id)return t.Promise.error("The status id is not exists.")._thenRunCallbacks(e);var n=o("statuses",null,this.id,"DELETE",e&&e.sessionToken);return n._thenRunCallbacks(e)},toObject:function(){return this.id?t.Object.createWithoutData("_Status",this.id):null},_getDataJSON:function(){var e=i.clone(this.data);return t._encode(e)},send:function(e){if(!t.User.current())throw"Please signin an user.";if(!this.query)return t.Status.sendStatusToFollowers(this,e);var n=this.query.toJSON();n.className=this.query.className;var r={};r.query=n,this.data=this.data||{};var i=t.Object.createWithoutData("_User",t.User.current().id)._toPointer();this.data.source=this.data.source||i,r.data=this._getDataJSON(),r.inboxType=this.inboxType||"default";var s=o("statuses",null,null,"POST",r,e&&e.sessionToken),a=this;return s.then(function(e){return a.id=e.objectId,a.createdAt=t._parseDate(e.createdAt),a})._thenRunCallbacks(e)},_finishFetch:function(e){this.id=e.objectId,this.createdAt=t._parseDate(e.createdAt),this.updatedAt=t._parseDate(e.updatedAt),this.messageId=e.messageId,delete e.messageId,delete e.objectId,delete e.createdAt,delete e.updatedAt,this.data=t._decode(void 0,e)}},t.Status.sendStatusToFollowers=function(e,n){if(!t.User.current())throw"Please signin an user.";var r={};r.className="_Follower",r.keys="follower";var i=t.Object.createWithoutData("_User",t.User.current().id)._toPointer();r.where={user:i};var s={};s.query=r,e.data=e.data||{},e.data.source=e.data.source||i,s.data=e._getDataJSON(),s.inboxType=e.inboxType||"default";var a=o("statuses",null,null,"POST",s,n&&n.sessionToken);return a.then(function(n){return e.id=n.objectId,e.createdAt=t._parseDate(n.createdAt),e})._thenRunCallbacks(n)},t.Status.sendPrivateStatus=function(e,n,r){if(!t.User.current())throw"Please signin an user.";if(!n)throw"Invalid target user.";var s=i.isString(n)?n:n.id;if(!s)throw"Invalid target user.";var a={};a.className="_User";var u=t.Object.createWithoutData("_User",t.User.current().id)._toPointer();a.where={objectId:s};var c={};c.query=a,e.data=e.data||{},e.data.source=e.data.source||u,c.data=e._getDataJSON(),c.inboxType="private",e.inboxType="private";var l=o("statuses",null,null,"POST",c,r&&r.sessionToken);return l.then(function(n){return e.id=n.objectId,e.createdAt=t._parseDate(n.createdAt),e})._thenRunCallbacks(r)},t.Status.countUnreadStatuses=function(e){if(!t.User.current()&&null==e)throw"Please signin an user or pass the owner objectId.";e=e||t.User.current();var n=i.isString(arguments[1])?arguments[2]:arguments[1],r=i.isString(arguments[1])?arguments[1]:"default",s={};s.inboxType=t._encode(r),s.owner=t._encode(e);var a=o("subscribe/statuses/count",null,null,"GET",s,n&&n.sessionToken);return a._thenRunCallbacks(n)},t.Status.statusQuery=function(e){var n=new t.Query("_Status");return e&&n.equalTo("source",e),n},t.InboxQuery=t.Query._extend({_objectClass:t.Status,_sinceId:0,_maxId:0,_inboxType:"default",_owner:null,_newObject:function(){return new t.Status},_createRequest:function(t,e){return o("subscribe/statuses",null,null,"GET",t||this.toJSON(),e&&e.sessionToken)},sinceId:function(t){return this._sinceId=t,this},maxId:function(t){return this._maxId=t,this},owner:function(t){return this._owner=t,this},inboxType:function(t){return this._inboxType=t,this},toJSON:function(){var e=t.InboxQuery.__super__.toJSON.call(this);return e.owner=t._encode(this._owner),e.inboxType=t._encode(this._inboxType),e.sinceId=t._encode(this._sinceId),e.maxId=t._encode(this._maxId),e}}),t.Status.inboxQuery=function(e,n){var r=new t.InboxQuery(t.Status);return e&&(r._owner=e),n&&(r._inboxType=n),r}}},function(t,e,n){"use strict";var r=n(26),i=n(40)("cos"),o=n(8);t.exports=function(t,e,n){var s=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];n.attributes.url=t.url,n._bucket=t.bucket,n.id=t.objectId;var a=t.upload_url+"?sign="+encodeURIComponent(t.token),u=new o,c=r("POST",a).field("fileContent",e).field("op","upload");return s.onprogress&&c.on("progress",s.onprogress),c.end(function(t,e){return e&&i(e.status,e.body,e.text),t?(e&&(t.statusCode=e.status,t.responseText=e.text,t.response=e.body),u.reject(t)):void u.resolve(n)}),u}},function(t,e,n){"use strict";var r=n(26),i=n(8),o=n(40)("qiniu");t.exports=function(t,e,n){var s=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];n.attributes.url=t.url,n._bucket=t.bucket,n.id=t.objectId;var a=t.token,u=new i,c=r("POST","https://up.qbox.me").field("file",e).field("name",n.attributes.name).field("key",n._qiniu_key).field("token",a);return s.onprogress&&c.on("progress",s.onprogress),c.end(function(t,e){return e&&o(e.status,e.body,e.text),t?(e&&(t.statusCode=e.status,t.responseText=e.text,t.response=e.body),u.reject(t)):void u.resolve(n)}),u}},function(t,e,n){"use strict";var r=n(26),i=n(8);t.exports=function(t,e,n){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];n.attributes.url=t.url,n._bucket=t.bucket,n.id=t.objectId;var s=new i,a=r("PUT",t.upload_url).set("Content-Type",n.attributes.metaData.mime_type).send(e);return o.onprogress&&a.on("progress",o.onprogress),a.end(function(t,e){return t?(e&&(t.statusCode=e.status,t.responseText=e.text,t.response=e.body),s.reject(t)):void s.resolve(n)}),s}},function(t,e,n){"use strict";function r(t){var e=i.clone(t)||{};return delete e.success,delete e.error,e}var i=n(0),o=n(5),s=n(4).request;t.exports=function(t){t.User=t.Object.extend("_User",{_isCurrentUser:!1,_mergeMagicFields:function(e){e.sessionToken&&(this._sessionToken=e.sessionToken,delete e.sessionToken),t.User.__super__._mergeMagicFields.call(this,e)},_cleanupAuthData:function(){if(this.isCurrent()){var e=this.get("authData");e&&t._objectEach(this.get("authData"),function(t,n){e[n]||delete e[n]})}},_synchronizeAllAuthData:function(){var e=this.get("authData");if(e){var n=this;t._objectEach(this.get("authData"),function(t,e){n._synchronizeAuthData(e)})}},_synchronizeAuthData:function(e){if(this.isCurrent()){var n;i.isString(e)?(n=e,e=t.User._authProviders[n]):n=e.getAuthType();var r=this.get("authData");if(r&&e){var o=e.restoreAuthentication(r[n]);o||this._unlinkFrom(e)}}},_handleSaveResult:function(e){return e&&!t._config.disableCurrentUser&&(this._isCurrentUser=!0),this._cleanupAuthData(),this._synchronizeAllAuthData(),delete this._serverData.password,this._rebuildEstimatedDataForKey("password"),this._refreshCache(),!e&&!this.isCurrent()||t._config.disableCurrentUser?t.Promise.as():t.Promise.as(t.User._saveCurrentUser(this))},_linkWith:function(e,n){var o;if(i.isString(e)?(o=e,e=t.User._authProviders[e]):o=e.getAuthType(),i.has(n,"authData")){var s=this.get("authData")||{};return s[o]=n.authData,this.set("authData",s),this.save({authData:s},r(n)).then(function(t){return t._handleSaveResult(!0).then(function(){return t})})._thenRunCallbacks(n)}var a=this,u=new t.Promise;return e.authenticate({success:function(t,e){a._linkWith(t,{authData:e,success:n.success,error:n.error}).then(function(){u.resolve(a)})},error:function(t,e){n.error&&n.error(a,e),u.reject(e)}}),u},_unlinkFrom:function(e,n){var r;i.isString(e)?(r=e,e=t.User._authProviders[e]):r=e.getAuthType();var o=i.clone(n),s=this;return o.authData=null,o.success=function(t){s._synchronizeAuthData(e),n.success&&n.success.apply(this,arguments)},this._linkWith(e,o)},_isLinked:function(t){var e;e=i.isString(t)?t:t.getAuthType();var n=this.get("authData")||{};return!!n[e]},logOut:function(){this._logOutWithAll(),this._isCurrentUser=!1},_logOutWithAll:function(){var e=this.get("authData");if(e){var n=this;t._objectEach(this.get("authData"),function(t,e){n._logOutWith(e)})}},_logOutWith:function(e){this.isCurrent()&&(i.isString(e)&&(e=t.User._authProviders[e]),e&&e.deauthenticate&&e.deauthenticate())},signUp:function(t,e){var n;e=e||{};var i=t&&t.username||this.get("username");if(!i||""===i)throw n=new o(o.OTHER_CAUSE,"Cannot sign up user with an empty name."),e&&e.error&&e.error(this,n),n;var s=t&&t.password||this.get("password");if(!s||""===s)throw n=new o(o.OTHER_CAUSE,"Cannot sign up user with an empty password."),e&&e.error&&e.error(this,n),n;return this.save(t,r(e)).then(function(t){return t._handleSaveResult(!0).then(function(){return t})})._thenRunCallbacks(e,this)},signUpOrlogInWithMobilePhone:function(t,e){var n;e=e||{};var i=t&&t.mobilePhoneNumber||this.get("mobilePhoneNumber");if(!i||""===i)throw n=new o(o.OTHER_CAUSE,"Cannot sign up or login user by mobilePhoneNumber with an empty mobilePhoneNumber."),e&&e.error&&e.error(this,n),n;var a=t&&t.smsCode||this.get("smsCode");if(!a||""===a)throw n=new o(o.OTHER_CAUSE,"Cannot sign up or login user by mobilePhoneNumber  with an empty smsCode."),e&&e.error&&e.error(this,n),n;var u=r(e);return u._makeRequest=function(t,e,n,r,i){return s("usersByMobilePhone",null,null,"POST",i)},this.save(t,u).then(function(t){return delete t.attributes.smsCode,delete t._serverData.smsCode,t._handleSaveResult(!0).then(function(){return t})})._thenRunCallbacks(e)},logIn:function(t){var e=this,n=s("login",null,null,"POST",this.toJSON());return n.then(function(t,n,r){var i=e.parse(t,n,r);return e._finishFetch(i),e._handleSaveResult(!0).then(function(){return i.smsCode||delete e.attributes.smsCode,e})})._thenRunCallbacks(t,this)},save:function(e,n,o){var s,a;return i.isObject(e)||i.isNull(e)||i.isUndefined(e)?(s=e,a=n):(s={},s[e]=n,a=o),a=a||{},t.Object.prototype.save.call(this,s,r(a)).then(function(t){return t._handleSaveResult(!1).then(function(){return t})})._thenRunCallbacks(a)},follow:function(t,e){if(!this.id)throw"Please signin.";if(!t)throw"Invalid target user.";var n=i.isString(t)?t:t.id;if(!n)throw"Invalid target user.";var r="users/"+this.id+"/friendship/"+n,o=s(r,null,null,"POST",null,e&&e.sessionToken);return o._thenRunCallbacks(e)},unfollow:function(t,e){if(!this.id)throw"Please signin.";if(!t)throw"Invalid target user.";var n=i.isString(t)?t:t.id;if(!n)throw"Invalid target user.";var r="users/"+this.id+"/friendship/"+n,o=s(r,null,null,"DELETE",null,e&&e.sessionToken);return o._thenRunCallbacks(e)},followerQuery:function(){return t.User.followerQuery(this.id)},followeeQuery:function(){return t.User.followeeQuery(this.id)},fetch:function(){var e=null,n={};return 1===arguments.length?e=arguments[0]:2===arguments.length&&(n=arguments[0],e=arguments[1]),t.Object.prototype.fetch.call(this,n,{}).then(function(t){return t._handleSaveResult(!1).then(function(){return t})})._thenRunCallbacks(e)},updatePassword:function(t,e,n){var r="users/"+this.id+"/updatePassword",i={old_password:t,new_password:e},o=s(r,null,null,"PUT",i,n&&n.sessionToken);return o._thenRunCallbacks(n,this)},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},getMobilePhoneNumber:function(){return this.get("mobilePhoneNumber")},setMobilePhoneNumber:function(t,e){return this.set("mobilePhoneNumber",t,e)},setUsername:function(t,e){return this.set("username",t,e)},setPassword:function(t,e){return this.set("password",t,e)},getEmail:function(){return this.get("email")},setEmail:function(t,e){return this.set("email",t,e)},authenticated:function(){return!!this._sessionToken&&!t._config.disableCurrentUser&&t.User.current()&&t.User.current().id===this.id},getSessionToken:function(){return this._sessionToken}},{_currentUser:null,_currentUserMatchesDisk:!1,_CURRENT_USER_KEY:"currentUser",_authProviders:{},signUp:function(e,n,r,i){r=r||{},r.username=e,r.password=n;var o=t.Object._create("_User");return o.signUp(r,i)},logIn:function(e,n,r){var i=t.Object._create("_User");return i._finishFetch({username:e,password:n}),i.logIn(r)},become:function(e,n){n=n||{};var r=t.Object._create("_User");return s("users","me",null,"GET",{useMasterKey:n.useMasterKey,session_token:e}).then(function(t,e,n){var i=r.parse(t,e,n);return r._finishFetch(i),r._handleSaveResult(!0).then(function(){return r})})._thenRunCallbacks(n,r)},logInWithMobilePhoneSmsCode:function(e,n,r){var i=t.Object._create("_User");return i._finishFetch({mobilePhoneNumber:e,smsCode:n}),i.logIn(r)},signUpOrlogInWithMobilePhone:function(e,n,r,i){r=r||{},r.mobilePhoneNumber=e,r.smsCode=n;var o=t.Object._create("_User");return o.signUpOrlogInWithMobilePhone(r,i)},logInWithMobilePhone:function(e,n,r){var i=t.Object._create("_User");return i._finishFetch({mobilePhoneNumber:e,password:n}),i.logIn(r)},signUpOrlogInWithAuthData:function(e,n,r){return t.User._logInWith(n,{authData:e})._thenRunCallbacks(r)},associateWithAuthData:function(t,e,n){return t._linkWith(e,{authData:n})},logOut:function(){return t._config.disableCurrentUser?(console.warn("AV.User.current() was disabled in multi-user environment, call logOut() from user object instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),t.Promise.as(null)):(null!==t.User._currentUser&&(t.User._currentUser._logOutWithAll(),t.User._currentUser._isCurrentUser=!1),t.User._currentUserMatchesDisk=!0,t.User._currentUser=null,t.localStorage.removeItemAsync(t._getAVPath(t.User._CURRENT_USER_KEY)))},followerQuery:function(e){if(!e||!i.isString(e))throw"Invalid user object id.";var n=new t.FriendShipQuery("_Follower");return n._friendshipTag="follower",n.equalTo("user",t.Object.createWithoutData("_User",e)),n},followeeQuery:function(e){if(!e||!i.isString(e))throw"Invalid user object id.";var n=new t.FriendShipQuery("_Followee");return n._friendshipTag="followee",n.equalTo("user",t.Object.createWithoutData("_User",e)),n},requestPasswordReset:function(t,e){var n={email:t},r=s("requestPasswordReset",null,null,"POST",n);return r._thenRunCallbacks(e)},requestEmailVerify:function(t,e){var n={email:t},r=s("requestEmailVerify",null,null,"POST",n);return r._thenRunCallbacks(e)},requestEmailVerfiy:function(t,e){var n={email:t},r=s("requestEmailVerify",null,null,"POST",n);return r._thenRunCallbacks(e)},requestMobilePhoneVerify:function(t,e){var n={mobilePhoneNumber:t},r=s("requestMobilePhoneVerify",null,null,"POST",n);return r._thenRunCallbacks(e)},requestPasswordResetBySmsCode:function(t,e){var n={mobilePhoneNumber:t},r=s("requestPasswordResetBySmsCode",null,null,"POST",n);return r._thenRunCallbacks(e)},resetPasswordBySmsCode:function(t,e,n){var r={password:e},i=s("resetPasswordBySmsCode",null,t,"PUT",r);return i._thenRunCallbacks(n)},verifyMobilePhone:function(t,e){var n=s("verifyMobilePhone",null,t,"POST",null);return n._thenRunCallbacks(e)},requestLoginSmsCode:function(t,e){var n={mobilePhoneNumber:t},r=s("requestLoginSmsCode",null,null,"POST",n);return r._thenRunCallbacks(e)},currentAsync:function(){return t._config.disableCurrentUser?(console.warn("AV.User.currentAsync() was disabled in multi-user environment, access user from request instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),t.Promise.as(null)):t.User._currentUser?t.Promise.as(t.User._currentUser):t.User._currentUserMatchesDisk?t.Promise.as(t.User._currentUser):t.localStorage.getItemAsync(t._getAVPath(t.User._CURRENT_USER_KEY)).then(function(e){if(!e)return null;t.User._currentUserMatchesDisk=!0,t.User._currentUser=t.Object._create("_User"),t.User._currentUser._isCurrentUser=!0;var n=JSON.parse(e);return t.User._currentUser.id=n._id,delete n._id,t.User._currentUser._sessionToken=n._sessionToken,delete n._sessionToken,t.User._currentUser._finishFetch(n),t.User._currentUser._synchronizeAllAuthData(),t.User._currentUser._refreshCache(),t.User._currentUser._opSetQueue=[{}],t.User._currentUser})},current:function(){if(t._config.disableCurrentUser)return console.warn("AV.User.current() was disabled in multi-user environment, access user from request instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),null;if(t.User._currentUser)return t.User._currentUser;if(t.User._currentUserMatchesDisk)return t.User._currentUser;t.User._currentUserMatchesDisk=!0;var e=t.localStorage.getItem(t._getAVPath(t.User._CURRENT_USER_KEY));if(!e)return null;t.User._currentUser=t.Object._create("_User"),t.User._currentUser._isCurrentUser=!0;var n=JSON.parse(e);return t.User._currentUser.id=n._id,delete n._id,t.User._currentUser._sessionToken=n._sessionToken,delete n._sessionToken,t.User._currentUser._finishFetch(n),t.User._currentUser._synchronizeAllAuthData(),t.User._currentUser._refreshCache(),t.User._currentUser._opSetQueue=[{}],t.User._currentUser},_saveCurrentUser:function(e){var n;return n=t.User._currentUser!==e?t.User.logOut():t.Promise.as(),n.then(function(){e._isCurrentUser=!0,t.User._currentUser=e;var n=e.toJSON();return n._id=e.id,n._sessionToken=e._sessionToken,t.localStorage.setItemAsync(t._getAVPath(t.User._CURRENT_USER_KEY),JSON.stringify(n)).then(function(){t.User._currentUserMatchesDisk=!0})})},_registerAuthenticationProvider:function(e){t.User._authProviders[e.getAuthType()]=e,!t._config.disableCurrentUser&&t.User.current()&&t.User.current()._synchronizeAuthData(e.getAuthType())},_logInWith:function(e,n){var r=t.Object._create("_User");return r._linkWith(e,n)}})}},function(t,e){"use strict";t.exports="js1.4.0"},function(t,e,n){!function(e){var n={},r={};n.length=0,n.getItem=function(t){return r[t]||null},n.setItem=function(t,e){"undefined"==typeof e?n.removeItem(t):(r.hasOwnProperty(t)||n.length++,r[t]=""+e)},n.removeItem=function(t){r.hasOwnProperty(t)&&(delete r[t],n.length--)},n.key=function(t){return Object.keys(r)[t]||null},n.clear=function(){r={},n.length=0},t.exports=n}(this)},function(t,e,n){!function(){var e=n(120),r=n(43).utf8,i=n(127),o=n(43).bin,s=function(t,n){t.constructor==String?t=n&&"binary"===n.encoding?o.stringToBytes(t):r.stringToBytes(t):i(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var a=e.bytesToWords(t),u=8*t.length,c=1732584193,l=-271733879,f=-1732584194,h=271733878,d=0;d<a.length;d++)a[d]=16711935&(a[d]<<8|a[d]>>>24)|4278255360&(a[d]<<24|a[d]>>>8);a[u>>>5]|=128<<u%32,a[(u+64>>>9<<4)+14]=u;for(var p=s._ff,_=s._gg,v=s._hh,m=s._ii,d=0;d<a.length;d+=16){var g=c,y=l,b=f,w=h;c=p(c,l,f,h,a[d+0],7,-680876936),h=p(h,c,l,f,a[d+1],12,-389564586),f=p(f,h,c,l,a[d+2],17,606105819),l=p(l,f,h,c,a[d+3],22,-1044525330),c=p(c,l,f,h,a[d+4],7,-176418897),h=p(h,c,l,f,a[d+5],12,1200080426),f=p(f,h,c,l,a[d+6],17,-1473231341),l=p(l,f,h,c,a[d+7],22,-45705983),c=p(c,l,f,h,a[d+8],7,1770035416),h=p(h,c,l,f,a[d+9],12,-1958414417),f=p(f,h,c,l,a[d+10],17,-42063),l=p(l,f,h,c,a[d+11],22,-1990404162),c=p(c,l,f,h,a[d+12],7,1804603682),h=p(h,c,l,f,a[d+13],12,-40341101),f=p(f,h,c,l,a[d+14],17,-1502002290),l=p(l,f,h,c,a[d+15],22,1236535329),c=_(c,l,f,h,a[d+1],5,-165796510),h=_(h,c,l,f,a[d+6],9,-1069501632),f=_(f,h,c,l,a[d+11],14,643717713),l=_(l,f,h,c,a[d+0],20,-373897302),c=_(c,l,f,h,a[d+5],5,-701558691),h=_(h,c,l,f,a[d+10],9,38016083),f=_(f,h,c,l,a[d+15],14,-660478335),l=_(l,f,h,c,a[d+4],20,-405537848),c=_(c,l,f,h,a[d+9],5,568446438),h=_(h,c,l,f,a[d+14],9,-1019803690),f=_(f,h,c,l,a[d+3],14,-187363961),l=_(l,f,h,c,a[d+8],20,1163531501),c=_(c,l,f,h,a[d+13],5,-1444681467),h=_(h,c,l,f,a[d+2],9,-51403784),f=_(f,h,c,l,a[d+7],14,1735328473),l=_(l,f,h,c,a[d+12],20,-1926607734),c=v(c,l,f,h,a[d+5],4,-378558),h=v(h,c,l,f,a[d+8],11,-2022574463),f=v(f,h,c,l,a[d+11],16,1839030562),l=v(l,f,h,c,a[d+14],23,-35309556),c=v(c,l,f,h,a[d+1],4,-1530992060),h=v(h,c,l,f,a[d+4],11,1272893353),f=v(f,h,c,l,a[d+7],16,-155497632),l=v(l,f,h,c,a[d+10],23,-1094730640),c=v(c,l,f,h,a[d+13],4,681279174),h=v(h,c,l,f,a[d+0],11,-358537222),f=v(f,h,c,l,a[d+3],16,-722521979),l=v(l,f,h,c,a[d+6],23,76029189),c=v(c,l,f,h,a[d+9],4,-640364487),h=v(h,c,l,f,a[d+12],11,-421815835),f=v(f,h,c,l,a[d+15],16,530742520),l=v(l,f,h,c,a[d+2],23,-995338651),c=m(c,l,f,h,a[d+0],6,-198630844),h=m(h,c,l,f,a[d+7],10,1126891415),f=m(f,h,c,l,a[d+14],15,-1416354905),l=m(l,f,h,c,a[d+5],21,-57434055),c=m(c,l,f,h,a[d+12],6,1700485571),h=m(h,c,l,f,a[d+3],10,-1894986606),f=m(f,h,c,l,a[d+10],15,-1051523),l=m(l,f,h,c,a[d+1],21,-2054922799),c=m(c,l,f,h,a[d+8],6,1873313359),h=m(h,c,l,f,a[d+15],10,-30611744),f=m(f,h,c,l,a[d+6],15,-1560198380),l=m(l,f,h,c,a[d+13],21,1309151649),c=m(c,l,f,h,a[d+4],6,-145523070),h=m(h,c,l,f,a[d+11],10,-1120210379),f=m(f,h,c,l,a[d+2],15,718787259),l=m(l,f,h,c,a[d+9],21,-343485551),c=c+g>>>0,l=l+y>>>0,f=f+b>>>0,h=h+w>>>0}return e.endian([c,l,f,h])};s._ff=function(t,e,n,r,i,o,s){var a=t+(e&n|~e&r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},s._gg=function(t,e,n,r,i,o,s){var a=t+(e&r|n&~r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},s._hh=function(t,e,n,r,i,o,s){var a=t+(e^n^r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},s._ii=function(t,e,n,r,i,o,s){var a=t+(n^(e|~r))+(i>>>0)+s;return(a<<o|a>>>32-o)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,n){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var r=e.wordsToBytes(s(t,n));return n&&n.asBytes?r:n&&n.asString?o.bytesToString(r):e.bytesToHex(r)}}()},function(t,e){function n(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(t){return t>=c?Math.round(t/c)+"d":t>=u?Math.round(t/u)+"h":t>=a?Math.round(t/a)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function i(t){return o(t,c,"day")||o(t,u,"hour")||o(t,a,"minute")||o(t,s,"second")||t+" ms"}function o(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var s=1e3,a=60*s,u=60*a,c=24*u,l=365.25*c;t.exports=function(t,e){return e=e||{},"string"==typeof t?n(t):e["long"]?i(t):r(t)}},,,,function(t,e,n){var r=n(61);e.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},e.parse=function(t){return this._parser=t,this},e.serialize=function(t){return this._serializer=t,this},e.timeout=function(t){return this._timeout=t,this},e.then=function(t,e){if(!this._fullfilledPromise){var n=this;this._fullfilledPromise=new Promise(function(t,e){n.end(function(n,r){n?e(n):t(r)})})}return this._fullfilledPromise.then(t,e)},e.use=function(t){return t(this),this},e.get=function(t){return this._header[t.toLowerCase()]},e.getHeader=e.get,e.set=function(t,e){if(r(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},e.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},e.field=function(t,e){return this._getFormData().append(t,e),this},e.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},e.withCredentials=function(){return this._withCredentials=!0,this},e.redirects=function(t){return this._maxRedirects=t,this},e.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},e._isHost=function(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}},e.send=function(t){var e=r(t),n=this._header["content-type"];if(e&&r(this._data))for(var i in t)this._data[i]=t[i];else"string"==typeof t?(n||this.type("form"),n=this._header["content-type"],"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+t:t:this._data=(this._data||"")+t):this._data=t;return!e||this._isHost(t)?this:(n||this.type("json"),this)}},function(t,e){function n(t,e,n){return"function"==typeof n?new t("GET",e).end(n):2==arguments.length?new t("GET",e):new t(e,n)}t.exports=n},function(t,e,n){t.exports=n(9)(4)},,function(t,e){}]);